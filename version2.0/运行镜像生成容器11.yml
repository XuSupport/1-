app:
  description: è¿è¡Œé•œåƒç”Ÿæˆå®¹å™¨
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: è¿è¡Œé•œåƒç”Ÿæˆå®¹å™¨11
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.6@dd589dc093c8084925858034ab5ec1fdf0d33819f43226c2f8c4a749a9acbbb2
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: a4863504-6cd3-4d17-a6b3-04965ab50048
    name: API_KEY
    selector:
    - env
    - API_KEY
    value: e62a9b0d239d3f6fe2f203c5bede453c
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: code
      id: 1751958369811-source-1751958458923-target
      source: '1751958369811'
      sourceHandle: source
      target: '1751958458923'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1751958485789-source-1751958489786-target
      source: '1751958485789'
      sourceHandle: source
      target: '1751958489786'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1751958489786-source-1751958530025-target
      source: '1751958489786'
      sourceHandle: source
      target: '1751958530025'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 1751958458923-source-1752744084798-target
      source: '1751958458923'
      sourceHandle: source
      target: '1752744084798'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 1752744084798-source-1752744189472-target
      source: '1752744084798'
      sourceHandle: source
      target: '1752744189472'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 1752744189472-source-1751958485789-target
      source: '1752744189472'
      sourceHandle: source
      target: '1751958485789'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: input
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: input
      height: 90
      id: '1751958369811'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport requests\n\
          import json\n\ndef main(input:str, API_KEY:str) -> dict:\n    \"\"\"\n \
          \   è·å–æ‰€æœ‰Dockeré•œåƒä¿¡æ¯å¹¶è¿”å›ï¼Œè®©åç«¯å¤§æ¨¡å‹è¿›è¡Œæ¯”å¯¹\n    \n    å‚æ•°:\n        input: ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢æ–‡æœ¬ï¼ŒåŒ…å«å¯¹é¶åœºç¯å¢ƒçš„éœ€æ±‚æè¿°\n\
          \        \n    è¿”å›:\n        dict: åŒ…å«æ‰€æœ‰é•œåƒä¿¡æ¯å’Œç”¨æˆ·è¾“å…¥çš„æ ¼å¼åŒ–æ–‡æœ¬\n    \"\"\"\n    #\
          \ APIæœåŠ¡çš„URL\n    API_BASE_URL = \"http://172.17.0.1:8005\"\n    \n    #\
          \ æ·»åŠ APIå¯†é’¥åˆ°è¯·æ±‚å¤´\n    headers = {\n        \"X-API-Key\": API_KEY\n    }\n\
          \    \n    try:\n        # è·å–å½“å‰å¯ç”¨çš„Dockeré•œåƒ\n        try:\n            images_response\
          \ = requests.get(f\"{API_BASE_URL}/docker/images\", headers=headers, timeout=10)\n\
          \            images_response.raise_for_status()\n            images_data\
          \ = images_response.json()\n        except Exception as e:\n           \
          \ return {\n                \"result\": f\"### âš ï¸ è·å–Dockeré•œåƒåˆ—è¡¨å¤±è´¥\\n\\næ— æ³•è·å–å½“å‰å¯ç”¨çš„Dockeré•œåƒåˆ—è¡¨ã€‚\\\
          né”™è¯¯ä¿¡æ¯: {str(e)}\\n\\nè¯·ç¡®è®¤DockeræœåŠ¡æ­£å¸¸è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n       \
          \     }\n        \n        if images_data.get(\"status\") != \"success\"\
          :\n            return {\n                \"result\": f\"### âš ï¸ è·å–Dockeré•œåƒåˆ—è¡¨å¤±è´¥\\\
          n\\næ— æ³•è·å–å½“å‰å¯ç”¨çš„Dockeré•œåƒåˆ—è¡¨ã€‚\\né”™è¯¯ä¿¡æ¯: {images_data.get('message', 'æœªçŸ¥é”™è¯¯')}\\\
          n\\nè¯·ç¡®è®¤DockeræœåŠ¡æ­£å¸¸è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n            }\n        \n\
          \        # è·å–æ‰€æœ‰é•œåƒ\n        images = images_data.get(\"images\", [])\n  \
          \      \n        # å¦‚æœæ²¡æœ‰é•œåƒ\n        if not images:\n            return {\n\
          \                \"result\": f\"### â„¹ï¸ å½“å‰ç¯å¢ƒä¸­æ²¡æœ‰Dockeré•œåƒ\\n\\næœªæ£€æµ‹åˆ°ä»»ä½•å¯ç”¨çš„Dockeré•œåƒã€‚å¯èƒ½éœ€è¦å…ˆæ‹‰å–ç›¸å…³é•œåƒã€‚\\\
          n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n            }\n        \n        # è¿”å›æ‰€æœ‰é•œåƒä¿¡æ¯\n \
          \       result = f\"### \U0001F4CB å½“å‰å¯ç”¨Dockeré•œåƒ\\n\\n\"\n        \n    \
          \    # è¡¨æ ¼æ ‡é¢˜\n        result += \"| é•œåƒåç§° | æ ‡ç­¾ | é•œåƒID | å¤§å° | åˆ›å»ºæ—¶é—´ |\\n\"\n\
          \        result += \"|---------|-----|--------|------|--------|\\n\"\n \
          \       \n        # è¡¨æ ¼å†…å®¹\n        for image in images:\n            repo\
          \ = image.get(\"Repository\", \"\")\n            tag = image.get(\"Tag\"\
          , \"\")\n            image_id = image.get(\"ID\", \"\")\n            size\
          \ = image.get(\"Size\", \"\")\n            created = image.get(\"CreatedAt\"\
          , \"\")\n            result += f\"| {repo} | {tag} | {image_id} | {size}\
          \ | {created} |\\n\"\n        \n        result += f\"\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\
          \n        \n        return {\"result\": result}\n        \n    except requests.exceptions.ConnectionError:\n\
          \        return {\n            \"result\": f\"### âŒ è¿æ¥é”™è¯¯\\n\\næ— æ³•è¿æ¥åˆ°Docker\
          \ APIæœåŠ¡ã€‚è¯·ç¡®ä¿æœåŠ¡æ­£åœ¨è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        }\n    except requests.exceptions.Timeout:\n\
          \        return {\n            \"result\": f\"### â±ï¸ è¯·æ±‚è¶…æ—¶\\n\\nè¿æ¥Docker\
          \ APIæœåŠ¡è¶…æ—¶ã€‚è¯·æ£€æŸ¥æœåŠ¡çŠ¶æ€åé‡è¯•ã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        }\n    except Exception\
          \ as e:\n        return {\n            \"result\": f\"### \U0001F525 æœªçŸ¥é”™è¯¯\\\
          n\\nå¤„ç†Dockeré•œåƒæŸ¥è¯¢æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        } "
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æŸ¥çœ‹é•œåƒ
        type: code
        variables:
        - value_selector:
          - '1751958369811'
          - input
          variable: input
        - value_selector:
          - env
          - API_KEY
          variable: API_KEY
      height: 54
      id: '1751958458923'
      position:
        x: 382.4619910438254
        y: 282
      positionAbsolute:
        x: 382.4619910438254
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1752744189472'
          - result
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 8b4309e9-d5d9-4497-a186-faec7cacda45
          role: system
          text: "è§’è‰²ï¼š ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ Docker å®¹å™¨å¯åŠ¨å‘½ä»¤ç”Ÿæˆå™¨ã€‚ä½ å°†åˆ†æç”¨æˆ·æä¾›çš„å¯ç”¨é•œåƒåˆ—è¡¨å’Œä»–ä»¬çš„å¯åŠ¨è¯·æ±‚ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªç”¨äºå¯åŠ¨æŒ‡å®šå®¹å™¨çš„\
            \ curl å‘½ä»¤ã€‚\n\nèŒè´£ï¼š\n\n1. **è§£æè¾“å…¥æ•°æ®**ï¼š\n   - ä½ çš„è¾“å…¥å°†æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ {{#1752744189472.result#}}ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªåä¸º\
            \ \"#context#\" çš„é”®ã€‚\n   - #context# çš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†å¯ç”¨çš„ Docker é•œåƒåˆ—è¡¨ï¼ˆMarkdown\
            \ è¡¨æ ¼å½¢å¼ï¼‰ä»¥åŠç”¨æˆ·åœ¨æœ€åæå‡ºçš„å®é™…æŸ¥è¯¢ã€‚\n   - ä½ å¿…é¡»ä» #context# å­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œç²¾ç¡®åœ°æå–å‡º **ç”¨æˆ·æŸ¥è¯¢**: ä¹‹åçš„å†…å®¹ï¼Œè¿™æ‰æ˜¯ç”¨æˆ·çœŸæ­£çš„å¯åŠ¨è¯·æ±‚ã€‚\n\
            \n2. **è§£æå¯ç”¨é•œåƒåˆ—è¡¨**ï¼š\n   - ç†è§£ä» #context# ä¸­æå–å‡ºçš„ Markdown è¡¨æ ¼å½¢å¼çš„ Docker é•œåƒä¿¡æ¯ï¼Œè¯†åˆ«å‡ºå¯ç”¨çš„é•œåƒåç§°å’Œæ ‡ç­¾ã€‚\n\
            \n3. **ç†è§£ç”¨æˆ·æ„å›¾**ï¼š\n   - è¯†åˆ«ç”¨æˆ·ä» **ç”¨æˆ·æŸ¥è¯¢**: ä¸­æå‡ºçš„ï¼Œæƒ³è¦å¯åŠ¨å“ªä¸ªå…·ä½“çš„é•œåƒã€‚\n\n4. **æ£€æŸ¥å½“å‰é•œåƒå’Œå®¹å™¨çŠ¶æ€**ï¼š\n\
            \   - åœ¨ç”Ÿæˆ curl å‘½ä»¤ä¹‹å‰ï¼Œä½¿ç”¨ arg1ï¼ˆä¾‹å¦‚ 'list_images'ï¼‰è°ƒç”¨ main å‡½æ•°ï¼ŒæŸ¥çœ‹å½“å‰å¯ç”¨çš„é•œåƒçŠ¶æ€ï¼Œç¡®ä¿è¯·æ±‚çš„é•œåƒå­˜åœ¨ã€‚\n\
            \   - ä½¿ç”¨ arg2ï¼ˆä¾‹å¦‚ 'list_containers'ï¼‰è°ƒç”¨ main å‡½æ•°ï¼ŒæŸ¥çœ‹æ‰€æœ‰å®¹å™¨çš„çŠ¶æ€ï¼Œè·å–å½“å‰çš„å®¹å™¨åç§°å’Œç«¯å£æ˜ å°„ä¿¡æ¯ï¼Œé¿å…å‘½åå†²çªå’Œç«¯å£å¤ç”¨ã€‚\n\
            \n5. **æ™ºèƒ½å†³ç­–å¹¶ç”Ÿæˆå‘½ä»¤**ï¼š\n   - **é•œåƒåŒ¹é…ï¼ˆæœ€æ ¸å¿ƒçš„ä¿®æ”¹ï¼Œè¯·ä¸¥æ ¼éµå¾ªï¼‰**ï¼š\n     - **ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šç²¾ç¡®é•œåƒååŒ¹é…**ï¼š\n\
            \       - å¦‚æœç”¨æˆ·æŸ¥è¯¢ä¸­æ˜ç¡®æåˆ°äº†ä¸€ä¸ªå®Œæ•´çš„é•œåƒåç§°ï¼ˆä¾‹å¦‚ redis:6-alpineã€mysql:5.7.44ã€my-secure-redisã€vulnerables/web-dvwaã€acgpiano/sqli-labs\
            \ ç­‰ï¼‰ï¼Œåˆ™å¿…é¡»ä¸”åªèƒ½åœ¨å¯ç”¨é•œåƒåˆ—è¡¨ä¸­å¯»æ‰¾å¹¶åŒ¹é…è¿™ä¸ªç²¾ç¡®çš„é•œåƒåç§°å’Œæ ‡ç­¾ã€‚\n       - åœ¨æ­¤æƒ…å†µä¸‹ï¼Œç¦æ­¢è¿›è¡Œä»»ä½•åŸºäºâ€œé¶åœºç±»å‹â€çš„æ¨æ–­æˆ–æ˜ å°„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·è¯´â€œå¯åŠ¨\
            \ redis:6-alpineâ€ï¼Œå³ä½¿ä½ çŸ¥é“ Redis å¸¸ç”¨äº SQL æ³¨å…¥é¶åœºï¼Œä¹Ÿç»ä¸èƒ½å°†å…¶æ˜ å°„åˆ° sqli-labs æˆ– dvwaã€‚\n\
            \     - **ç¬¬äºŒä¼˜å…ˆçº§ï¼šé€šç”¨é¶åœºç±»å‹åŒ¹é…ï¼ˆä»…å½“æ— ç²¾ç¡®é•œåƒåæ—¶ï¼‰**ï¼š\n       - åªæœ‰å½“ç”¨æˆ·æŸ¥è¯¢æ˜¯é€šç”¨ç±»å‹ï¼ˆä¾‹å¦‚â€œSQLæ³¨å…¥é¶åœºâ€ã€â€œWebGoat\
            \ ç¯å¢ƒâ€ã€â€œNginx æœåŠ¡å™¨â€ï¼‰ä¸”æ²¡æœ‰æ˜ç¡®æŒ‡å®šé•œåƒåç§°æ—¶ï¼Œæ‰å…è®¸æ ¹æ®ä»¥ä¸‹å¸¸ç”¨æ˜ å°„åœ¨å¯ç”¨é•œåƒåˆ—è¡¨ä¸­è¿›è¡ŒåŒ¹é…ï¼š\n         - â€œSQLæ³¨å…¥é¶åœºâ€æˆ–â€œsqlié¶åœºâ€ï¼šä¼˜å…ˆåŒ¹é…\
            \ acgpiano/sqli-labs:latestã€‚å¦‚æœåˆ—è¡¨ä¸­ä¸å­˜åœ¨ï¼Œåˆ™è€ƒè™‘ vulnerables/web-dvwa:latestã€‚\n\
            \         - â€œDVWA é¶åœºâ€æˆ–â€œdvwaâ€ï¼šåŒ¹é… vulnerables/web-dvwa:latestã€‚\n       \
            \  - â€œXSSé¶åœºâ€ï¼šè€ƒè™‘ vulnerables/web-dvwa:latest æˆ– bkimminich/juice-shop:latestã€‚\n\
            \         - â€œMySQL æ•°æ®åº“â€ï¼šåŒ¹é… mysql:5.7.44 æˆ– postgres:15-alpineã€‚\n      \
            \   - â€œRedis æ•°æ®åº“â€ï¼šåŒ¹é… redis:6-alpine æˆ– my-secure-redisã€‚\n         - â€œNginx\
            \ æœåŠ¡å™¨â€ï¼šåŒ¹é… nginx:latestã€‚\n         - â€œMetasploitable é¶æœºâ€ï¼šåŒ¹é… tleemcjr/metasploitable2:latestã€‚\n\
            \   - **å®¹å™¨åç§° (name)**ï¼š\n     - è‡ªåŠ¨ä¸ºå®¹å™¨ç”Ÿæˆä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°ï¼Œé€šå¸¸æ˜¯ é•œåƒå_container æˆ– é•œåƒå_labï¼Œå¹¶è¿½åŠ æ—¶é—´æˆ³ï¼ˆä¾‹å¦‚\
            \ _202507181006ï¼‰ï¼Œä»¥ç¡®ä¿å®¹å™¨åç§°å”¯ä¸€ï¼Œé¿å…é‡å¤ã€‚\n   - **ç«¯å£æ˜ å°„ (ports)**ï¼š\n     - æ ¹æ®ç›®æ ‡é•œåƒçš„ç±»å‹ï¼Œæ™ºèƒ½åœ°æ¨èå¹¶é€‰æ‹©ä¸€ä¸ªæœ€å¸¸ç”¨ä¸”åˆé€‚çš„å®¿ä¸»æœºç«¯å£è¿›è¡Œæ˜ å°„ã€‚\n\
            \     - é‡è¦ï¼šports å­—æ®µåªå…è®¸åŒ…å«ä¸€ä¸ªç«¯å£æ˜ å°„å­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º \"å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£\"ã€‚\n     - **æ£€æŸ¥ç«¯å£å ç”¨**ï¼š\n\
            \       - åœ¨é€‰æ‹©å®¿ä¸»æœºç«¯å£ä¹‹å‰ï¼Œä½¿ç”¨ arg2 è·å–å½“å‰æ‰€æœ‰å®¹å™¨çš„ç«¯å£æ˜ å°„ä¿¡æ¯ã€‚\n       - æ£€æŸ¥æ‰€é€‰çš„å®¿ä¸»æœºç«¯å£æ˜¯å¦å·²è¢«å…¶ä»–å®¹å™¨å ç”¨ã€‚\n\
            \       - å¦‚æœç«¯å£å·²è¢«å ç”¨ï¼Œè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæœªè¢«å ç”¨çš„ç«¯å£ï¼ˆä¾‹å¦‚ï¼Œé€’å¢ç«¯å£å·ç›´åˆ°æ‰¾åˆ°ç©ºé—²ç«¯å£ï¼‰ã€‚\n     - å¸¸è§é•œåƒä¸ç«¯å£æ˜ å°„è§„åˆ™ï¼š\n\
            \       - vulnerables/web-dvwa:latest: å®¹å™¨ç«¯å£ 80ï¼Œæ¨èå®¿ä¸»æœºç«¯å£ 8080ã€‚\n       -\
            \ acgpiano/sqli-labs:latest: å®¹å™¨ç«¯å£ 80ï¼Œæ¨èå®¿ä¸»æœºç«¯å£ 8081ã€‚\n       - bkimminich/juice-shop:latest:\
            \ å®¹å™¨ç«¯å£ 3000ï¼Œæ¨èå®¿ä¸»æœºç«¯å£ 3000ã€‚\n       - webgoat/webgoat:latest: å®¹å™¨ç«¯å£ 8080ï¼Œæ¨èå®¿ä¸»æœºç«¯å£\
            \ 8080ã€‚\n       - mysql:5.7.44: å®¹å™¨ç«¯å£ 3306ï¼Œæ¨èå®¿ä¸»æœºç«¯å£ 3306ã€‚\n       - redis:6-alpine\
            \ æˆ– my-secure-redis: å®¹å™¨ç«¯å£ 6379ï¼Œæ¨èå®¿ä¸»æœºç«¯å£ 6379ã€‚\n       - nginx:latest: å®¹å™¨ç«¯å£\
            \ 80ï¼Œæ¨èå®¿ä¸»æœºç«¯å£ 8080ã€‚\n       - tleemcjr/metasploitable2:latest: å®¹å™¨ç«¯å£ 22ï¼Œæ¨èå®¿ä¸»æœºç«¯å£\
            \ 2222ã€‚\n   - **ç¯å¢ƒå˜é‡ (env_vars)**ï¼š\n     - å¦‚æœå·²çŸ¥æŸä¸ªé•œåƒåœ¨å¯åŠ¨æ—¶å¼ºåˆ¶éœ€è¦ç‰¹å®šçš„ç¯å¢ƒå˜é‡ï¼ˆä¾‹å¦‚\
            \ mysql:5.7.44 éœ€è¦ MYSQL_ROOT_PASSWORDï¼‰ï¼Œè¯·åœ¨ env_vars å­—æ®µä¸­åŒ…å«è¿™äº›å˜é‡ã€‚\n     -\
            \ env_vars å¿…é¡»æ˜¯å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ å½¢å¦‚ \"KEY=VALUE\"ã€‚\n     - mysql:5.7.44 ç¤ºä¾‹ï¼šå¿…é¡»æ·»åŠ \
            \ \"MYSQL_ROOT_PASSWORD=vulnlab\"ã€‚\n     - å¯¹äºå…¶ä»–é•œåƒï¼Œå¦‚æœä¸éœ€è¦ç‰¹å®šç¯å¢ƒå˜é‡ï¼Œenv_vars\
            \ å­—æ®µå¯ä»¥çœç•¥æˆ–ç•™ç©ºåˆ—è¡¨ []ã€‚\n\n6. **æ„é€  curl å‘½ä»¤**ï¼š\n   - ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ¨¡æ¿ç”Ÿæˆ curl å‘½ä»¤ï¼š\n  \
            \   ```\n     curl -X POST \"http://10.50.24.154:8005/docker/run\" -H\
            \ \"Content-Type: application/json\" -d '{\"image\":\"é•œåƒå:æ ‡ç­¾\",\"name\"\
            :\"å®¹å™¨å\",\"ports\":[\"å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£\"][, \"env_vars\":[\"ç¯å¢ƒå˜é‡å=ç¯å¢ƒå˜é‡å€¼\"]]\
            \ }'\n     ```\n   - ç¡®ä¿ URL å’Œ JSON payload çš„æ‹¼æ¥æ­£ç¡®æ— è¯¯ï¼Œç‰¹åˆ«æ˜¯ JSON å†…éƒ¨çš„è½¬ä¹‰å­—ç¬¦ \\\
            \"ã€‚\n\n**è¾“å‡ºæ ¼å¼**ï¼š\n- ä½ çš„è¾“å‡ºå¿…é¡»åªåŒ…å«ä¸€ä¸ªå®Œæ•´çš„ curl å‘½ä»¤å­—ç¬¦ä¸²ï¼Œä¸åŒ…å«ä»»ä½•é¢å¤–çš„æ–‡å­—ã€è§£é‡Šã€JSON æ ¼å¼æˆ– Markdown\
            \ ä»£ç å—ã€‚\n- å¦‚æœç”¨æˆ·è¯·æ±‚å¯åŠ¨çš„é•œåƒåœ¨åˆ—è¡¨ä¸­ä¸å­˜åœ¨ï¼Œè¯·å›å¤â€œæŠ±æ­‰ï¼Œæˆ‘æ— æ³•åœ¨å¯ç”¨é•œåƒåˆ—è¡¨ä¸­æ‰¾åˆ°æ‚¨è¯·æ±‚çš„é•œåƒã€‚â€\n- å¦‚æœæ‰€é€‰çš„å®¿ä¸»æœºç«¯å£å·²è¢«å ç”¨ï¼Œè¯·åœ¨ç”Ÿæˆå‘½ä»¤å‰è‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæœªè¢«å ç”¨çš„ç«¯å£ã€‚\n\
            \n**è¾“å…¥ç¤ºä¾‹**ï¼š\n```json\n{\n  \"#context#\": \"### \U0001F4CB å½“å‰å¯ç”¨Dockeré•œåƒ\\\
            n\\n| é•œåƒåç§° | æ ‡ç­¾ | é•œåƒID | å¤§å° | åˆ›å»ºæ—¶é—´ |\\n|---------|-----|--------|------|--------|\\\
            n| redis | 6-alpine | 70b635414ee2 | 30.2MB | 2025-04-24 16:18:49 +0800\
            \ CST |\\n| mysql | 5.7.44 | 5107333e08a8 | 501MB | 2023-12-13 03:11:08\
            \ +0800 CST |\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: å¼€å¯Redisæ•°æ®åº“\"\n}\n```\n\n**é¢„æœŸè¾“å‡º**ï¼š\n```\n\
            curl -X POST \"http://10.50.24.154:8005/docker/run\" -H \"Content-Type:\
            \ application/json\" -d '{\"image\":\"redis:6-alpine\",\"name\":\"redis_db_lab_202507181006\"\
            ,\"ports\":[\"6379:6379\"]}'\n```"
        selected: false
        title: ç”ŸæˆCURL
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1751958485789'
      position:
        x: 1292.1902862930915
        y: 282
      positionAbsolute:
        x: 1292.1902862930915
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(input: str, API_KEY: str) -> dict:\n    \"\"\"\n    ä»…å‘ /docker/run\
          \ å‘é€éé˜»å¡å¼å¯åŠ¨è¯·æ±‚ï¼Œå¹¶è¿”å›å‹å¥½æç¤º\n    â€”â€” è‹¥æ£€æµ‹åˆ°å¯†ç /å¯†é’¥ç›¸å…³ env_varsï¼Œæœ«å°¾å›æ˜¾å…·ä½“å˜é‡åŠå…¶å€¼\n    \"\"\"\
          \n    import requests, json, re\n\n    result_lines = []\n    secret_pairs\
          \ = []          # â† å­˜å‚¨ (name, value) å…ƒç»„\n\n    try:\n        # 1ï¸âƒ£ è§£æ URL\n\
          \        url_match = re.search(r'http[^\"]+/docker/run', input)\n      \
          \  url = url_match.group(0) if url_match else \"http://172.17.0.1:8001/docker/run\"\
          \n        result_lines.append(f\"Docker API åœ°å€: {url}\")\n\n        # 2ï¸âƒ£\
          \ æå– JSON\n        m = re.search(r'-d\\s+(?P<q>[\\'\"])(?P<body>\\{.*?})(?P=q)',\
          \ input, re.DOTALL)\n        if not m:\n            return {\"result\":\
          \ \"é”™è¯¯: æ— æ³•ä»è¾“å…¥ä¸­æå– JSON æ•°æ®\"}\n\n        cleaned = m.group('body').replace(r'\\\
          \"', '\"')\n        try:\n            data_json = json.loads(cleaned)\n\
          \        except json.JSONDecodeError:\n            return {\"result\": f\"\
          é”™è¯¯: JSON è§£æå¤±è´¥ - {cleaned}\"}\n\n        image_name = data_json.get(\"image\"\
          , \"æœªæŒ‡å®šé•œåƒ\")\n        result_lines.append(f\"ç›®æ ‡é•œåƒ: {image_name}\")\n\n \
          \       # 2ï¸âƒ£Â·a æ”¶é›†æ•æ„Ÿ env_vars\n        for env in data_json.get(\"env_vars\"\
          , []):\n            name, _, value = env.partition(\"=\")\n            if\
          \ re.search(r'(?i)(pass(word)?|pwd|secret|token)', name):\n            \
          \    secret_pairs.append((name, value))\n\n        # 3ï¸âƒ£ å‘é€è¯·æ±‚\n        headers\
          \ = {\"Content-Type\": \"application/json\", \"X-API-Key\": API_KEY}\n \
          \       result_lines.append(\"\\nå‘é€ RUN è¯·æ±‚ä¸­...\")\n        resp = requests.post(url,\
          \ headers=headers, json=data_json, timeout=30)\n\n        # 4ï¸âƒ£ å¤„ç†å“åº”\n \
          \       if 200 <= resp.status_code < 300:\n            try:\n          \
          \      js = resp.json()\n                result_lines.append(\"âœ… å®¹å™¨å¯åŠ¨è¯·æ±‚å·²è¢«æ¥å—!\"\
          )\n                if msg := js.get(\"message\"):\n                    result_lines.append(f\"\
          æœåŠ¡å™¨æ¶ˆæ¯: {msg}\")\n                if ports := data_json.get(\"ports\"):\n\
          \                    result_lines.append(f\"ç«¯å£æ˜ å°„: {', '.join(ports)}\")\n\
          \                result_lines.append(\"\\nå®¹å™¨å·²åœ¨åå°å¯åŠ¨ï¼Œå¯ç¨åè°ƒç”¨ /docker/ps æŸ¥çœ‹çŠ¶æ€ã€‚\"\
          )\n            except json.JSONDecodeError:\n                result_lines.append(f\"\
          è¯·æ±‚æˆåŠŸä½†æ— æ³•è§£æå“åº”: {resp.text}\")\n        else:\n            result_lines.append(f\"\
          âŒ è¯·æ±‚å¤±è´¥ (çŠ¶æ€ç : {resp.status_code})\")\n            result_lines.append(f\"\
          é”™è¯¯ä¿¡æ¯: {resp.text}\")\n\n    except requests.exceptions.Timeout:\n      \
          \  result_lines.append(\"âš ï¸ è¯·æ±‚è¶…æ—¶ï¼Œä½†å®¹å™¨å¯èƒ½ä»åœ¨åå°å¯åŠ¨\")\n    except requests.exceptions.ConnectionError:\n\
          \        result_lines.append(\"âŒ æ— æ³•è¿æ¥åˆ° Docker API æœåŠ¡\")\n    except Exception\
          \ as e:\n        result_lines.append(f\"âŒ æ‰§è¡Œé”™è¯¯: {str(e)}\")\n\n    # 5ï¸âƒ£\
          \ å›æ˜¾å¯†ç ç¯å¢ƒå˜é‡\n    if secret_pairs:\n        result_lines.append(\"\\n\U0001F510\
          \ ä¼ å…¥çš„æ•æ„Ÿç¯å¢ƒå˜é‡ï¼š\")\n        for name, value in secret_pairs:\n            result_lines.append(f\"\
          \  â€¢ {name} = {value}\")\n\n    result_lines.append(\"\\nå¦‚éœ€åœæ­¢æˆ–åˆ é™¤å®¹å™¨ï¼Œå¯è°ƒç”¨ /docker/stop\
          \ æˆ– /docker/rmã€‚\")\n    return {\"result\": '\\n'.join(result_lines)}\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: curl
        type: code
        variables:
        - value_selector:
          - '1751958485789'
          - text
          variable: input
        - value_selector:
          - env
          - API_KEY
          variable: API_KEY
      height: 54
      id: '1751958489786'
      position:
        x: 1589.3477226630832
        y: 282
      positionAbsolute:
        x: 1589.3477226630832
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1751958489786'
          - result
          variable: result
        selected: false
        title: ç»“æŸ
        type: end
      height: 90
      id: '1751958530025'
      position:
        x: 1896
        y: 282
      positionAbsolute:
        x: 1896
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport requests\n\
          import json\nimport argparse\n\ndef main(input:str, API_KEY:str) -> dict:\n\
          \    \"\"\"\n    è·å–æ‰€æœ‰Dockerå®¹å™¨ä¿¡æ¯ï¼ˆåŒ…æ‹¬æœªè¿è¡Œçš„ï¼‰å¹¶è¿”å›ï¼Œè®©åç«¯å¤§æ¨¡å‹è¿›è¡Œæ¯”å¯¹\n    \n    å‚æ•°:\n \
          \       input: ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢æ–‡æœ¬ï¼ŒåŒ…å«å¯¹é¶åœºç¯å¢ƒçš„éœ€æ±‚æè¿°\n        \n    è¿”å›:\n        dict:\
          \ åŒ…å«æ‰€æœ‰å®¹å™¨ä¿¡æ¯å’Œç”¨æˆ·è¾“å…¥çš„æ ¼å¼åŒ–æ–‡æœ¬\n    \"\"\"\n    # APIæœåŠ¡çš„URL\n    API_BASE_URL = \"\
          http://172.17.0.1:8005\"\n    \n    # æ·»åŠ APIå¯†é’¥åˆ°è¯·æ±‚å¤´\n    headers = {\n   \
          \     \"X-API-Key\": API_KEY\n    }\n    \n    try:\n        # è·å–æ‰€æœ‰Dockerå®¹å™¨ï¼ˆåŒ…æ‹¬æœªè¿è¡Œçš„ï¼‰\n\
          \        try:\n            # ä½¿ç”¨ docker ps -a å¯¹åº”çš„API\n            containers_response\
          \ = requests.get(f\"{API_BASE_URL}/docker/ps?all=true\", headers=headers,\
          \ timeout=10)\n            containers_response.raise_for_status()\n    \
          \        containers_data = containers_response.json()\n        except Exception\
          \ as e:\n            return {\n                \"result\": f\"### âš ï¸ è·å–Dockerå®¹å™¨åˆ—è¡¨å¤±è´¥\\\
          n\\næ— æ³•è·å–å½“å‰çš„Dockerå®¹å™¨åˆ—è¡¨ã€‚\\né”™è¯¯ä¿¡æ¯: {str(e)}\\n\\nè¯·ç¡®è®¤DockeræœåŠ¡æ­£å¸¸è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**:\
          \ {input}\"\n            }\n        \n        if containers_data.get(\"\
          status\") != \"success\":\n            return {\n                \"result\"\
          : f\"### âš ï¸ è·å–Dockerå®¹å™¨åˆ—è¡¨å¤±è´¥\\n\\næ— æ³•è·å–å½“å‰çš„Dockerå®¹å™¨åˆ—è¡¨ã€‚\\né”™è¯¯ä¿¡æ¯: {containers_data.get('message',\
          \ 'æœªçŸ¥é”™è¯¯')}\\n\\nè¯·ç¡®è®¤DockeræœåŠ¡æ­£å¸¸è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n            }\n\
          \        \n        # è·å–æ‰€æœ‰å®¹å™¨\n        containers = containers_data.get(\"\
          containers\", [])\n        \n        # å¦‚æœæ²¡æœ‰å®¹å™¨\n        if not containers:\n\
          \            return {\n                \"result\": f\"### â„¹ï¸ å½“å‰ç¯å¢ƒä¸­æ²¡æœ‰Dockerå®¹å™¨\\\
          n\\næœªæ£€æµ‹åˆ°ä»»ä½•Dockerå®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çŠ¶æ€ï¼‰ã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n            }\n  \
          \      \n        # è¿”å›æ‰€æœ‰å®¹å™¨ä¿¡æ¯\n        result = f\"### \U0001F4CB å½“å‰æ‰€æœ‰Dockerå®¹å™¨\\\
          n\\n\"\n        \n        # è¡¨æ ¼æ ‡é¢˜\n        result += \"| å®¹å™¨ID | å®¹å™¨åç§° | é•œåƒ\
          \ | çŠ¶æ€ | ç«¯å£ | åˆ›å»ºæ—¶é—´ |\\n\"\n        result += \"|--------|---------|------|------|------|--------|\\\
          n\"\n        \n        # è¡¨æ ¼å†…å®¹\n        for container in containers:\n  \
          \          container_id = container.get(\"ID\", \"\")[:12]  # æˆªå–IDå‰12ä½ä»¥ä¾¿æ˜¾ç¤º\n\
          \            names = container.get(\"Names\", \"\")\n            image =\
          \ container.get(\"Image\", \"\")\n            status = container.get(\"\
          Status\", \"\")\n            ports = container.get(\"Ports\", \"\")\n  \
          \          created = container.get(\"CreatedAt\", \"\")\n            \n\
          \            # æ ¹æ®çŠ¶æ€æ·»åŠ çŠ¶æ€å›¾æ ‡\n            if \"Up\" in status:\n          \
          \      status = \"\U0001F7E2 \" + status  # è¿è¡Œä¸­\n            elif \"Exited\"\
          \ in status:\n                status = \"\U0001F534 \" + status  # å·²åœæ­¢\n\
          \            else:\n                status = \"âšª \" + status  # å…¶ä»–çŠ¶æ€\n \
          \               \n            result += f\"| {container_id} | {names} |\
          \ {image} | {status} | {ports} | {created} |\\n\"\n        \n        # æ·»åŠ ç®€å•çš„çŠ¶æ€ç»Ÿè®¡\n\
          \        running = sum(1 for c in containers if \"Up\" in c.get(\"Status\"\
          , \"\"))\n        stopped = sum(1 for c in containers if \"Exited\" in c.get(\"\
          Status\", \"\"))\n        result += f\"\\n**ç»Ÿè®¡ä¿¡æ¯**: å…±{len(containers)}ä¸ªå®¹å™¨ï¼Œ{running}ä¸ªè¿è¡Œä¸­ï¼Œ{stopped}ä¸ªå·²åœæ­¢\\\
          n\\n\"\n        \n        result += f\"**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        \n \
          \       return {\"result\": result}\n        \n    except requests.exceptions.ConnectionError:\n\
          \        return {\n            \"result\": f\"### âŒ è¿æ¥é”™è¯¯\\n\\næ— æ³•è¿æ¥åˆ°Docker\
          \ APIæœåŠ¡ã€‚è¯·ç¡®ä¿æœåŠ¡æ­£åœ¨è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        }\n    except requests.exceptions.Timeout:\n\
          \        return {\n            \"result\": f\"### â±ï¸ è¯·æ±‚è¶…æ—¶\\n\\nè¿æ¥Docker\
          \ APIæœåŠ¡è¶…æ—¶ã€‚è¯·æ£€æŸ¥æœåŠ¡çŠ¶æ€åé‡è¯•ã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        }\n    except Exception\
          \ as e:\n        return {\n            \"result\": f\"### \U0001F525 æœªçŸ¥é”™è¯¯\\\
          n\\nå¤„ç†Dockerå®¹å™¨æŸ¥è¯¢æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: true
        title: æŸ¥çœ‹å½“å‰æ‰€æœ‰å®¹å™¨çš„çŠ¶æ€
        type: code
        variables:
        - value_selector:
          - '1751958369811'
          - input
          value_type: string
          variable: input
        - value_selector:
          - env
          - API_KEY
          value_type: string
          variable: API_KEY
      height: 54
      id: '1752744084798'
      position:
        x: 690.7886967616984
        y: 282
      positionAbsolute:
        x: 690.7886967616984
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(arg1: str, arg2: str) -> dict:\n    \"\"\"\n    ä¸»å‡½æ•°ï¼Œç”¨äºå¤„ç†æŸ¥çœ‹Dockeré•œåƒå’Œå®¹å™¨çŠ¶æ€çš„è¯·æ±‚ã€‚\n\
          \    \n    Args:\n        arg1 (str): ç”¨äºè§¦å‘æŸ¥çœ‹å½“å‰é•œåƒçŠ¶æ€çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ 'list_images' æˆ–å…·ä½“çš„é•œåƒæŸ¥è¯¢å‚æ•°ã€‚\n\
          \                    å¯¹åº”åŠŸèƒ½ï¼šåˆ—å‡ºæœ¬åœ°å·²ä¸‹è½½çš„Dockeré•œåƒï¼ˆåç§°ã€æ ‡ç­¾ã€å¤§å°ç­‰ï¼‰ã€‚\n        arg2 (str):\
          \ ç”¨äºè§¦å‘æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çŠ¶æ€çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ 'list_containers' æˆ–å…·ä½“çš„å®¹å™¨æŸ¥è¯¢å‚æ•°ã€‚\n                   \
          \ å¯¹åº”åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å®¹å™¨çš„è¿è¡ŒçŠ¶æ€ï¼ˆåŒ…æ‹¬å®¹å™¨IDã€åç§°ã€ç«¯å£æ˜ å°„ç­‰ï¼‰ã€‚\n    \n    Returns:\n        dict:\
          \ åŒ…å«æŸ¥è¯¢ç»“æœçš„å­—å…¸ï¼Œç»“æ„å¾…åç»­ç»“åˆå¤§æ¨¡å‹æç¤ºè¯ä¼˜åŒ–ã€‚\n    \"\"\"\n    # ä¸´æ—¶å®ç°ï¼šå°† arg1 å’Œ arg2 çš„å€¼æ‹¼æ¥è¿”å›ï¼Œç”¨äºæµ‹è¯•å‚æ•°ä¼ é€’\n\
          \    # åç»­éœ€è¦æ›¿æ¢ä¸ºå®é™…çš„é•œåƒå’Œå®¹å™¨çŠ¶æ€æŸ¥è¯¢é€»è¾‘\n    return {\n        \"result\": f\"æŸ¥çœ‹é•œåƒçŠ¶æ€:\
          \ {arg1}, æŸ¥çœ‹å®¹å™¨çŠ¶æ€: {arg2}\"\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: èšåˆ
        type: code
        variables:
        - value_selector:
          - '1751958458923'
          - result
          value_type: string
          variable: arg1
        - value_selector:
          - '1752744084798'
          - result
          value_type: string
          variable: arg2
      height: 54
      id: '1752744189472'
      position:
        x: 992.1902862930916
        y: 282
      positionAbsolute:
        x: 992.1902862930916
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -166.49980437984527
      y: 187.30915722160563
      zoom: 0.7134756486130079
