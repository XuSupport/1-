app:
  description: '111'
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: è¿è¡Œdockerfileé•œåƒ02
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.6@dd589dc093c8084925858034ab5ec1fdf0d33819f43226c2f8c4a749a9acbbb2
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: d5ac9250-1892-45dd-b34c-83ff8dab143e
    name: API_KEY
    selector:
    - env
    - API_KEY
    value: e62a9b0d239d3f6fe2f203c5bede453c
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: code
      id: 1751874365670-source-1751874594906-target
      source: '1751874365670'
      sourceHandle: source
      target: '1751874594906'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 1751874594906-source-1751874367651-target
      source: '1751874594906'
      sourceHandle: source
      target: '1751874367651'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1751874367651-source-1751875003034-target
      source: '1751874367651'
      sourceHandle: source
      target: '1751875003034'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1751875003034-source-1751874372360-target
      source: '1751875003034'
      sourceHandle: source
      target: '1751874372360'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: input
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: input
      height: 90
      id: '1751874365670'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1751874594906'
          - result
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 66611fe2-beff-4dea-a132-7cb8a35102ea
          role: system
          text: "è§’è‰²ï¼š ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ Docker å®¹å™¨å¯åŠ¨å‘½ä»¤ç”Ÿæˆå™¨ã€‚ä½ å°†åˆ†æç”¨æˆ·æä¾›çš„å¯ç”¨é•œåƒåˆ—è¡¨å’Œä»–ä»¬çš„å¯åŠ¨è¯·æ±‚{{#1751874594906.result#}}ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªç”¨äºå¯åŠ¨æŒ‡å®šå®¹å™¨çš„\
            \ curl å‘½ä»¤ã€‚\nèŒè´£ï¼š\nè§£æå¯ç”¨é•œåƒåˆ—è¡¨ï¼š ç†è§£æä¾›çš„ Markdown è¡¨æ ¼å½¢å¼çš„ Docker é•œåƒä¿¡æ¯ï¼Œè¯†åˆ«å‡ºå¯ç”¨çš„é•œåƒåç§°å’Œæ ‡ç­¾ã€‚\n\
            ç†è§£ç”¨æˆ·æ„å›¾ï¼š è¯†åˆ«ç”¨æˆ·æƒ³è¦å¯åŠ¨å“ªä¸ªå…·ä½“çš„é•œåƒã€‚\næ™ºèƒ½å†³ç­–å¹¶ç”Ÿæˆå‘½ä»¤ï¼š\nå®¹å™¨åç§° (name)ï¼š è‡ªåŠ¨ä¸ºå®¹å™¨ç”Ÿæˆä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°ï¼Œé€šå¸¸æ˜¯\
            \ é•œåƒå_container æˆ– é•œåƒå_labã€‚\nç«¯å£æ˜ å°„ (ports)ï¼š\næ ¹æ®ç›®æ ‡é•œåƒçš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼šWeb åº”ç”¨ã€æ•°æ®åº“ã€SSH\
            \ æœåŠ¡ç­‰ï¼‰ï¼Œæ™ºèƒ½åœ°æ¨èå¹¶é€‰æ‹©ä¸€ä¸ªæœ€å¸¸ç”¨ä¸”åˆé€‚çš„å®¿ä¸»æœºç«¯å£è¿›è¡Œæ˜ å°„ã€‚\né‡è¦ï¼šports å­—æ®µåªå…è®¸åŒ…å«ä¸€ä¸ªç«¯å£æ˜ å°„å­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º \"å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£\"\
            ã€‚\nå¸¸è§é»˜è®¤ç«¯å£ï¼š\nWeb åº”ç”¨ (å¦‚ DVWA, Juice Shop, Nginx): å®¹å™¨ç«¯å£é€šå¸¸æ˜¯ 80 æˆ– 3000ï¼Œæ¨èæ˜ å°„åˆ°å®¿ä¸»æœº\
            \ 8080ã€‚\nMySQL æ•°æ®åº“: å®¹å™¨ç«¯å£ 3306ï¼Œæ¨èæ˜ å°„åˆ°å®¿ä¸»æœº 3306ã€‚\nRedis æ•°æ®åº“: å®¹å™¨ç«¯å£ 6379ï¼Œæ¨èæ˜ å°„åˆ°å®¿ä¸»æœº\
            \ 6379ã€‚\nSSH æœåŠ¡ (å¦‚ Metasploitable): å®¹å™¨ç«¯å£ 22ï¼Œæ¨èæ˜ å°„åˆ°å®¿ä¸»æœº 2222ã€‚\nç¯å¢ƒå˜é‡ (env_vars)ï¼š\
            \ å¦‚æœå·²çŸ¥æŸä¸ªé•œåƒï¼ˆå¦‚æ ‡å‡† mysql é•œåƒï¼‰åœ¨å¯åŠ¨æ—¶éœ€è¦ç‰¹å®šçš„ç¯å¢ƒå˜é‡ï¼ˆä¾‹å¦‚ MYSQL_ROOT_PASSWORDï¼‰ï¼Œè¯·åœ¨ env_vars\
            \ å­—æ®µä¸­åŒ…å«è¿™äº›å˜é‡ã€‚env_vars å¿…é¡»æ˜¯å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ å½¢å¦‚ \"KEY=VALUE\"ã€‚å¯¹äºè‡ªå®šä¹‰æ„å»ºçš„é•œåƒï¼Œå¦‚æœå…¶ Dockerfile\
            \ å·²å°†å‡­æ®ç¡¬ç¼–ç åˆ° CMD æˆ– ENTRYPOINTï¼Œåˆ™æ— éœ€é¢å¤– env_varsã€‚\næ„é€  curl å‘½ä»¤ï¼š ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ¨¡æ¿ç”Ÿæˆ curl\
            \ å‘½ä»¤ã€‚\ncurl å‘½ä»¤æ¨¡æ¿ï¼š\ncurl -X POST \"http://10.50.24.154:8005/docker/run\"\
            \ -H \"Content-Type: application/json\" -d '{\"image\":\"é•œåƒå:æ ‡ç­¾\",\"name\"\
            :\"å®¹å™¨å\",\"ports\":[\"å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£\"][, \"env_vars\":[\"ç¯å¢ƒå˜é‡å=ç¯å¢ƒå˜é‡å€¼\"]]\
            \ }'\nè¾“å‡ºæ ¼å¼ï¼š\nä½ çš„è¾“å‡ºå¿…é¡»åªåŒ…å«ä¸€ä¸ªå®Œæ•´çš„ curl å‘½ä»¤å­—ç¬¦ä¸²ï¼Œä¸åŒ…å«ä»»ä½•é¢å¤–çš„æ–‡å­—ã€è§£é‡Šã€JSON æ ¼å¼æˆ– Markdown\
            \ ä»£ç å—ã€‚\nè¾“å…¥ç¤ºä¾‹ï¼š\nJSON\n{\n  \"result\": \"### \U0001F4CB å½“å‰å¯ç”¨Dockeré•œåƒ\\\
            n\\n| é•œåƒåç§° | æ ‡ç­¾ | é•œåƒID | å¤§å° | åˆ›å»ºæ—¶é—´ |\\n|---------|-----|--------|------|--------|\\\
            n| docker-docker-api | latest | 68092649dad5 | 103MB | 2025-07-03 09:10:40\
            \ +0800 CST |\\n| <none> | <none> | 1da800da81a9 | 136MB | 2025-07-02\
            \ 16:30:50 +0800 CST |\\n| langgenius/dify-api | 1.5.0 | e83456ad9de1\
            \ | 1.98GB | 2025-06-25 17:24:41 +0800 CST |\\n| langgenius/dify-web |\
            \ 1.5.0 | 2cd0aa1baee1 | 535MB | 2025-06-25 17:00:56 +0800 CST |\\n| nginx\
            \ | latest | 9592f5595f2b | 192MB | 2025-06-25 04:52:14 +0800 CST |\\\
            n| bkimminich/juice-shop | latest | f056b7d0c127 | 418MB | 2025-06-17\
            \ 06:23:41 +0800 CST |\\n| langgenius/dify-plugin-daemon | 0.1.2-local\
            \ | 95a00635bf89 | 1.38GB | 2025-06-11 16:23:07 +0800 CST |\\n| postgres\
            \ | 15-alpine | 8c5b83868f93 | 274MB | 2025-06-07 02:27:47 +0800 CST |\\\
            n| my-secure-redis | latest | 5c22deb3f5d4 | 128MB | 2025-05-30 00:02:07\
            \ +0800 CST |\\n| langgenius/dify-sandbox | 0.2.12 | ba1b250b9505 | 578MB\
            \ | 2025-05-07 18:08:12 +0800 CST |\\n| redis | 6-alpine | 70b635414ee2\
            \ | 30.2MB | 2025-04-24 16:18:49 +0800 CST |\\n| ubuntu/squid | latest\
            \ | feec1ad0ab0a | 213MB | 2025-04-16 21:58:15 +0800 CST |\\n| webgoat/webgoat\
            \ | latest | d8434d588ee3 | 601MB | 2023-03-12 03:20:13 +0800 CST |\\\
            n| mysql | 5.7.44 | 5107333e08a8 | 501MB | 2023-12-13 03:11:08 +0800 CST\
            \ |\\n| semitechnologies/weaviate | 1.19.0 | 8ec9f084ab23 | 52.5MB | 2023-05-05\
            \ 00:01:32 +0800 CST |\\n| postgres | 10.7-alpine | 2a46e2abc7d6 | 70.7MB\
            \ | 2019-04-25 08:28:10 +0800 CST |\\n| vulhub/confluence | 6.10.2 | 8d358560578b\
            \ | 725MB | 2019-04-10 05:52:24 +0800 CST |\\n| vulnerables/web-dvwa |\
            \ latest | ab0d83586b6e | 712MB | 2018-10-13 01:49:01 +0800 CST |\\n|\
            \ tleemcjr/metasploitable2 | latest | db90cb788ea1 | 1.51GB | 2018-01-28\
            \ 15:09:54 +0800 CST |\\n| raesene/bwapp | latest | 8be28fba48ec | 441MB\
            \ | 2016-02-15 18:35:01 +0800 CST |\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: å¯åŠ¨my-secure-redisé•œåƒ\"\
            \n}\n\né¢„æœŸæ¨¡å‹è¾“å‡ºï¼š\ncurl -X POST \"http://10.50.24.154:8005/docker/run\" -H\
            \ \"Content-Type: application/json\" -d '{\"image\":\"my-secure-redis:latest\"\
            ,\"name\":\"my-secure-redis-container\",\"ports\":[\"6379:6379\"]}'\n\n\
            é‡è¦æç¤ºï¼š\nä¸¥æ ¼æŒ‰ç…§ä¸Šè¿° curl å‘½ä»¤æ¨¡æ¿ç”Ÿæˆï¼Œç¡®ä¿ URL å’Œ JSON payload çš„æ‹¼æ¥æ­£ç¡®æ— è¯¯ï¼Œç‰¹åˆ«æ˜¯ JSON å†…éƒ¨çš„è½¬ä¹‰å­—ç¬¦\
            \ \\\"ã€‚\nports å­—æ®µå¿…é¡»æ˜¯ä¸€ä¸ªåŒ…å«å•ä¸ªå­—ç¬¦ä¸²çš„ JSON æ•°ç»„ã€‚\nå¦‚æœç”¨æˆ·è¯·æ±‚å¯åŠ¨çš„é•œåƒåœ¨åˆ—è¡¨ä¸­ä¸å­˜åœ¨ï¼Œè¯·å›å¤â€œæŠ±æ­‰ï¼Œæˆ‘æ— æ³•åœ¨å¯ç”¨é•œåƒåˆ—è¡¨ä¸­æ‰¾åˆ°æ‚¨è¯·æ±‚çš„é•œåƒã€‚â€\n\
            å¦‚æœé•œåƒéœ€è¦ç‰¹å®šç¯å¢ƒå˜é‡ï¼ˆä¾‹å¦‚ mysql:5.7.44 éœ€è¦ MYSQL_ROOT_PASSWORDï¼‰ï¼Œè¯·åŠ¡å¿…åœ¨ env_vars å­—æ®µä¸­æ·»åŠ ã€‚å¯¹äº\
            \ my-secure-redisï¼Œå…¶ Dockerfile å·²å°†å¯†ç ä½œä¸º CMD å‚æ•°ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–çš„ env_varsã€‚\nè¯·åªè¾“å‡ºå¯æ‰§è¡Œçš„å‘½ä»¤å†…å®¹ï¼Œä¸è¦æ·»åŠ ä»»ä½•é¢å¤–è§£é‡Šã€‚"
        selected: false
        title: ç”Ÿæˆcurl
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1751874367651'
      position:
        x: 684
        y: 282
      positionAbsolute:
        x: 684
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1751874367651'
          - text
          variable: text
        selected: false
        title: ç»“æŸ
        type: end
      height: 90
      id: '1751874372360'
      position:
        x: 1344.5632343732268
        y: 282
      positionAbsolute:
        x: 1344.5632343732268
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport requests\n\
          import json\n\ndef main(input:str, API_KEY:str) -> dict:\n    \"\"\"\n \
          \   è·å–æ‰€æœ‰Dockeré•œåƒä¿¡æ¯å¹¶è¿”å›ï¼Œè®©åç«¯å¤§æ¨¡å‹è¿›è¡Œæ¯”å¯¹\n    \n    å‚æ•°:\n        input: ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢æ–‡æœ¬ï¼ŒåŒ…å«å¯¹é¶åœºç¯å¢ƒçš„éœ€æ±‚æè¿°\n\
          \        \n    è¿”å›:\n        dict: åŒ…å«æ‰€æœ‰é•œåƒä¿¡æ¯å’Œç”¨æˆ·è¾“å…¥çš„æ ¼å¼åŒ–æ–‡æœ¬\n    \"\"\"\n    #\
          \ APIæœåŠ¡çš„URL\n    API_BASE_URL = \"http://172.17.0.1:8005\"\n    \n    #\
          \ æ·»åŠ APIå¯†é’¥åˆ°è¯·æ±‚å¤´\n    headers = {\n        \"X-API-Key\": API_KEY\n    }\n\
          \    \n    try:\n        # è·å–å½“å‰å¯ç”¨çš„Dockeré•œåƒ\n        try:\n            images_response\
          \ = requests.get(f\"{API_BASE_URL}/docker/images\", headers=headers, timeout=10)\n\
          \            images_response.raise_for_status()\n            images_data\
          \ = images_response.json()\n        except Exception as e:\n           \
          \ return {\n                \"result\": f\"### âš ï¸ è·å–Dockeré•œåƒåˆ—è¡¨å¤±è´¥\\n\\næ— æ³•è·å–å½“å‰å¯ç”¨çš„Dockeré•œåƒåˆ—è¡¨ã€‚\\\
          né”™è¯¯ä¿¡æ¯: {str(e)}\\n\\nè¯·ç¡®è®¤DockeræœåŠ¡æ­£å¸¸è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n       \
          \     }\n        \n        if images_data.get(\"status\") != \"success\"\
          :\n            return {\n                \"result\": f\"### âš ï¸ è·å–Dockeré•œåƒåˆ—è¡¨å¤±è´¥\\\
          n\\næ— æ³•è·å–å½“å‰å¯ç”¨çš„Dockeré•œåƒåˆ—è¡¨ã€‚\\né”™è¯¯ä¿¡æ¯: {images_data.get('message', 'æœªçŸ¥é”™è¯¯')}\\\
          n\\nè¯·ç¡®è®¤DockeræœåŠ¡æ­£å¸¸è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n            }\n        \n\
          \        # è·å–æ‰€æœ‰é•œåƒ\n        images = images_data.get(\"images\", [])\n  \
          \      \n        # å¦‚æœæ²¡æœ‰é•œåƒ\n        if not images:\n            return {\n\
          \                \"result\": f\"### â„¹ï¸ å½“å‰ç¯å¢ƒä¸­æ²¡æœ‰Dockeré•œåƒ\\n\\næœªæ£€æµ‹åˆ°ä»»ä½•å¯ç”¨çš„Dockeré•œåƒã€‚å¯èƒ½éœ€è¦å…ˆæ‹‰å–ç›¸å…³é•œåƒã€‚\\\
          n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n            }\n        \n        # è¿”å›æ‰€æœ‰é•œåƒä¿¡æ¯\n \
          \       result = f\"### \U0001F4CB å½“å‰å¯ç”¨Dockeré•œåƒ\\n\\n\"\n        \n    \
          \    # è¡¨æ ¼æ ‡é¢˜\n        result += \"| é•œåƒåç§° | æ ‡ç­¾ | é•œåƒID | å¤§å° | åˆ›å»ºæ—¶é—´ |\\n\"\n\
          \        result += \"|---------|-----|--------|------|--------|\\n\"\n \
          \       \n        # è¡¨æ ¼å†…å®¹\n        for image in images:\n            repo\
          \ = image.get(\"Repository\", \"\")\n            tag = image.get(\"Tag\"\
          , \"\")\n            image_id = image.get(\"ID\", \"\")\n            size\
          \ = image.get(\"Size\", \"\")\n            created = image.get(\"CreatedAt\"\
          , \"\")\n            result += f\"| {repo} | {tag} | {image_id} | {size}\
          \ | {created} |\\n\"\n        \n        result += f\"\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\
          \n        \n        return {\"result\": result}\n        \n    except requests.exceptions.ConnectionError:\n\
          \        return {\n            \"result\": f\"### âŒ è¿æ¥é”™è¯¯\\n\\næ— æ³•è¿æ¥åˆ°Docker\
          \ APIæœåŠ¡ã€‚è¯·ç¡®ä¿æœåŠ¡æ­£åœ¨è¿è¡Œã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        }\n    except requests.exceptions.Timeout:\n\
          \        return {\n            \"result\": f\"### â±ï¸ è¯·æ±‚è¶…æ—¶\\n\\nè¿æ¥Docker\
          \ APIæœåŠ¡è¶…æ—¶ã€‚è¯·æ£€æŸ¥æœåŠ¡çŠ¶æ€åé‡è¯•ã€‚\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        }\n    except Exception\
          \ as e:\n        return {\n            \"result\": f\"### \U0001F525 æœªçŸ¥é”™è¯¯\\\
          n\\nå¤„ç†Dockeré•œåƒæŸ¥è¯¢æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}\\n\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        } "
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æŸ¥çœ‹é•œåƒ
        type: code
        variables:
        - value_selector:
          - '1751874365670'
          - input
          variable: input
        - value_selector:
          - env
          - API_KEY
          value_type: string
          variable: API_KEY
      height: 54
      id: '1751874594906'
      position:
        x: 385.1569942835798
        y: 282
      positionAbsolute:
        x: 385.1569942835798
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(input: str, API_KEY: str) -> dict:\n    \"\"\"\n    ä»…å‘ /docker/run\
          \ å‘é€éé˜»å¡å¼å¯åŠ¨è¯·æ±‚ï¼Œå¹¶è¿”å›å‹å¥½æç¤º\n    â€”â€” è‹¥æ£€æµ‹åˆ°å¯†ç /å¯†é’¥ç›¸å…³ env_varsï¼Œæœ«å°¾å›æ˜¾å…·ä½“å˜é‡åŠå…¶å€¼\n    \"\"\"\
          \n    import requests, json, re\n\n    result_lines = []\n    secret_pairs\
          \ = []          # â† å­˜å‚¨ (name, value) å…ƒç»„\n\n    try:\n        # 1ï¸âƒ£ è§£æ URL\n\
          \        url_match = re.search(r'http[^\"]+/docker/run', input)\n      \
          \  url = url_match.group(0) if url_match else \"http://172.17.0.1:8001/docker/run\"\
          \n        result_lines.append(f\"Docker API åœ°å€: {url}\")\n\n        # 2ï¸âƒ£\
          \ æå– JSON\n        m = re.search(r'-d\\s+(?P<q>[\\'\"])(?P<body>\\{.*?})(?P=q)',\
          \ input, re.DOTALL)\n        if not m:\n            return {\"result\":\
          \ \"é”™è¯¯: æ— æ³•ä»è¾“å…¥ä¸­æå– JSON æ•°æ®\"}\n\n        cleaned = m.group('body').replace(r'\\\
          \"', '\"')\n        try:\n            data_json = json.loads(cleaned)\n\
          \        except json.JSONDecodeError:\n            return {\"result\": f\"\
          é”™è¯¯: JSON è§£æå¤±è´¥ - {cleaned}\"}\n\n        image_name = data_json.get(\"image\"\
          , \"æœªæŒ‡å®šé•œåƒ\")\n        result_lines.append(f\"ç›®æ ‡é•œåƒ: {image_name}\")\n\n \
          \       # 2ï¸âƒ£Â·a æ”¶é›†æ•æ„Ÿ env_vars\n        for env in data_json.get(\"env_vars\"\
          , []):\n            name, _, value = env.partition(\"=\")\n            if\
          \ re.search(r'(?i)(pass(word)?|pwd|secret|token)', name):\n            \
          \    secret_pairs.append((name, value))\n\n        # 3ï¸âƒ£ å‘é€è¯·æ±‚\n        headers\
          \ = {\"Content-Type\": \"application/json\", \"X-API-Key\": API_KEY}\n \
          \       result_lines.append(\"\\nå‘é€ RUN è¯·æ±‚ä¸­...\")\n        resp = requests.post(url,\
          \ headers=headers, json=data_json, timeout=30)\n\n        # 4ï¸âƒ£ å¤„ç†å“åº”\n \
          \       if 200 <= resp.status_code < 300:\n            try:\n          \
          \      js = resp.json()\n                result_lines.append(\"âœ… å®¹å™¨å¯åŠ¨è¯·æ±‚å·²è¢«æ¥å—!\"\
          )\n                if msg := js.get(\"message\"):\n                    result_lines.append(f\"\
          æœåŠ¡å™¨æ¶ˆæ¯: {msg}\")\n                if ports := data_json.get(\"ports\"):\n\
          \                    result_lines.append(f\"ç«¯å£æ˜ å°„: {', '.join(ports)}\")\n\
          \                result_lines.append(\"\\nå®¹å™¨å·²åœ¨åå°å¯åŠ¨ï¼Œå¯ç¨åè°ƒç”¨ /docker/ps æŸ¥çœ‹çŠ¶æ€ã€‚\"\
          )\n            except json.JSONDecodeError:\n                result_lines.append(f\"\
          è¯·æ±‚æˆåŠŸä½†æ— æ³•è§£æå“åº”: {resp.text}\")\n        else:\n            result_lines.append(f\"\
          âŒ è¯·æ±‚å¤±è´¥ (çŠ¶æ€ç : {resp.status_code})\")\n            result_lines.append(f\"\
          é”™è¯¯ä¿¡æ¯: {resp.text}\")\n\n    except requests.exceptions.Timeout:\n      \
          \  result_lines.append(\"âš ï¸ è¯·æ±‚è¶…æ—¶ï¼Œä½†å®¹å™¨å¯èƒ½ä»åœ¨åå°å¯åŠ¨\")\n    except requests.exceptions.ConnectionError:\n\
          \        result_lines.append(\"âŒ æ— æ³•è¿æ¥åˆ° Docker API æœåŠ¡\")\n    except Exception\
          \ as e:\n        result_lines.append(f\"âŒ æ‰§è¡Œé”™è¯¯: {str(e)}\")\n\n    # 5ï¸âƒ£\
          \ å›æ˜¾å¯†ç ç¯å¢ƒå˜é‡\n    if secret_pairs:\n        result_lines.append(\"\\n\U0001F510\
          \ ä¼ å…¥çš„æ•æ„Ÿç¯å¢ƒå˜é‡ï¼š\")\n        for name, value in secret_pairs:\n            result_lines.append(f\"\
          \  â€¢ {name} = {value}\")\n\n    result_lines.append(\"\\nå¦‚éœ€åœæ­¢æˆ–åˆ é™¤å®¹å™¨ï¼Œå¯è°ƒç”¨ /docker/stop\
          \ æˆ– /docker/rmã€‚\")\n    return {\"result\": '\\n'.join(result_lines)}\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: è¿è¡Œé•œåƒ
        type: code
        variables:
        - value_selector:
          - '1751874367651'
          - text
          variable: input
        - value_selector:
          - env
          - API_KEY
          value_type: string
          variable: API_KEY
      height: 54
      id: '1751875003034'
      position:
        x: 1039.7782629553276
        y: 291.2559542686387
      positionAbsolute:
        x: 1039.7782629553276
        y: 291.2559542686387
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 236.43692282077063
      y: 87.37111873341607
      zoom: 0.8643085054023973
