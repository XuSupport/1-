app:
  description: åœæ­¢å¯¹åº”å®¹å™¨
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: åœæ­¢å¯¹åº”å®¹å™¨03
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.6@dd589dc093c8084925858034ab5ec1fdf0d33819f43226c2f8c4a749a9acbbb2
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: b9f1ce16-95b1-49cb-b732-b189d2dd0923
    name: API_KEY
    selector:
    - env
    - API_KEY
    value: e62a9b0d239d3f6fe2f203c5bede453c
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: code
      id: 1751957208728-source-1751957214274-target
      source: '1751957208728'
      sourceHandle: source
      target: '1751957214274'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 1751957214274-source-1751957253130-target
      source: '1751957214274'
      sourceHandle: source
      target: '1751957253130'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1751957253130-source-1751957292502-target
      source: '1751957253130'
      sourceHandle: source
      target: '1751957292502'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1751957292502-source-1751957280872-target
      source: '1751957292502'
      sourceHandle: source
      target: '1751957280872'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: input
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: input
      height: 90
      id: '1751957208728'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport requests\n\
          import json\nimport datetime\nimport os\n\ndef main(input:str, API_KEY:str)\
          \ -> dict:\n    \"\"\"\n    ç”¨äºæ£€æŸ¥å½“å‰Dockerå®¹å™¨è¿è¡ŒçŠ¶æ€çš„å‡½æ•°ï¼Œé€‚ç”¨äºDifyå¹³å°\n    é€šè¿‡HTTPè¯·æ±‚è®¿é—®docker_api_serviceè·å–å®¹å™¨ä¿¡æ¯\n\
          \    \n    å‚æ•°:\n        input: ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢æ–‡æœ¬\n        \n    è¿”å›:\n        dict:\
          \ åŒ…å«Dockerå®¹å™¨çŠ¶æ€ä¿¡æ¯çš„ç¾è§‚ä¸­æ–‡æ ¼å¼\n    \"\"\"\n    # APIæœåŠ¡çš„URL\n    API_URL = \"http://172.17.0.1:8005/docker/ps\"\
          \n    \n    # æ·»åŠ APIå¯†é’¥åˆ°è¯·æ±‚å¤´\n    headers = {\n        \"X-API-Key\": API_KEY\n\
          \    }\n\n    try:\n        # å‘é€GETè¯·æ±‚è·å–å®¹å™¨åˆ—è¡¨\n        response = requests.get(API_URL,\
          \ headers=headers, timeout=10)\n        response.raise_for_status()  # å¦‚æœå“åº”çŠ¶æ€ç ä¸æ˜¯200ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸\n\
          \        \n        # è§£æJSONå“åº”\n        data = response.json()\n        \n\
          \        # æ£€æŸ¥APIå“åº”çŠ¶æ€\n        if data.get(\"status\") != \"success\":\n\
          \            error_msg = data.get('message', 'æœªçŸ¥é”™è¯¯')\n            result\
          \ = f\"\U0001F534 **é”™è¯¯**: APIè¿”å›éæˆåŠŸçŠ¶æ€\\n\\nåŸå› : {error_msg}\\n\\nç”¨æˆ·æŸ¥è¯¢: {input}\"\
          \n            return {\"result\": result}\n            \n        # è·å–å®¹å™¨åˆ—è¡¨\n\
          \        containers = data.get(\"containers\", [])\n        \n        #\
          \ æ ¼å¼åŒ–å®¹å™¨ä¿¡æ¯ä»¥ä¾¿æ˜“äºé˜…è¯»\n        formatted_containers = []\n        for container\
          \ in containers:\n            formatted_container = {\n                \"\
          container_id\": container.get(\"ID\", \"\")[:12],  # åªä¿ç•™IDå‰12ä½\n       \
          \         \"name\": container.get(\"Names\", \"\"),\n                \"\
          image\": container.get(\"Image\", \"\"),\n                \"status\": container.get(\"\
          Status\", \"\"),\n                \"ports\": container.get(\"Ports\", \"\
          \")\n            }\n            formatted_containers.append(formatted_container)\n\
          \        \n        # è·å–å½“å‰æ—¶é—´\n        current_time = datetime.datetime.now().strftime(\"\
          %Y-%m-%d %H:%M:%S\")\n        \n        # æ„å»ºç¾è§‚çš„ä¸­æ–‡è¾“å‡º\n        if not formatted_containers:\n\
          \            # æ²¡æœ‰è¿è¡Œçš„å®¹å™¨\n            result = f\"### \U0001F50D Dockerå®¹å™¨çŠ¶æ€æŸ¥è¯¢ç»“æœ\\\
          n\\n\"\n            result += f\"**æŸ¥è¯¢æ—¶é—´**: {current_time}\\n\\n\"\n    \
          \        result += f\"**è¿è¡ŒçŠ¶æ€**: å½“å‰æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„Dockerå®¹å™¨\\n\\n\"\n            result\
          \ += f\"**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        else:\n            # æœ‰è¿è¡Œçš„å®¹å™¨\n     \
          \       result = f\"### \U0001F433 Dockerå®¹å™¨çŠ¶æ€æŸ¥è¯¢ç»“æœ\\n\\n\"\n            result\
          \ += f\"**æŸ¥è¯¢æ—¶é—´**: {current_time}\\n\"\n            result += f\"**è¿è¡Œå®¹å™¨æ€»æ•°**:\
          \ {len(formatted_containers)}ä¸ª\\n\\n\"\n            \n            # è¡¨æ ¼æ ‡é¢˜\n\
          \            result += f\"| å®¹å™¨ID | å®¹å™¨åç§° | é•œåƒ | çŠ¶æ€ | ç«¯å£æ˜ å°„ |\\n\"\n      \
          \      result += f\"|--------|---------|------|------|--------|\\n\"\n \
          \           \n            # è¡¨æ ¼å†…å®¹\n            for container in formatted_containers:\n\
          \                result += f\"| {container['container_id']} | {container['name']}\
          \ | {container['image']} | {container['status']} | {container['ports']}\
          \ |\\n\"\n            \n            result += f\"\\n**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n\
          \        \n        # è¿”å›ç¬¦åˆDifyæ ¼å¼çš„ç»“æœ\n        return {\"result\": result}\n\
          \    \n    except requests.exceptions.ConnectionError:\n        # APIæœåŠ¡è¿æ¥é”™è¯¯\n\
          \        result = f\"### âŒ è¿æ¥é”™è¯¯\\n\\n\"\n        result += f\"æ— æ³•è¿æ¥åˆ°Docker\
          \ APIæœåŠ¡ {API_URL}\\n\\n\"\n        result += f\"**å¯èƒ½åŸå› **: Docker APIæœåŠ¡æœªå¯åŠ¨æˆ–ç½‘ç»œé—®é¢˜\\\
          n\\n\"\n        result += f\"**è§£å†³æ–¹æ¡ˆ**: è¯·ç¡®ä¿Docker APIæœåŠ¡æ­£åœ¨è¿è¡Œï¼Œå¹¶æ£€æŸ¥ç½‘ç»œè¿æ¥\\n\\\
          n\"\n        result += f\"**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        return {\"result\"\
          : result}\n    \n    except requests.exceptions.Timeout:\n        # è¯·æ±‚è¶…æ—¶\n\
          \        result = f\"### â±ï¸ è¯·æ±‚è¶…æ—¶\\n\\n\"\n        result += f\"è¿æ¥Docker\
          \ APIæœåŠ¡è¶…æ—¶\\n\\n\"\n        result += f\"**å¯èƒ½åŸå› **: æœåŠ¡å™¨å“åº”æ—¶é—´è¿‡é•¿æˆ–è´Ÿè½½è¿‡é«˜\\n\\n\"\
          \n        result += f\"**è§£å†³æ–¹æ¡ˆ**: è¯·æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€ï¼Œç¨åå†è¯•\\n\\n\"\n        result +=\
          \ f\"**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        return {\"result\": result}\n    \n  \
          \  except requests.exceptions.RequestException as e:\n        # å…¶ä»–è¯·æ±‚é”™è¯¯\n\
          \        result = f\"### âš ï¸ è¯·æ±‚é”™è¯¯\\n\\n\"\n        result += f\"å‘é€è¯·æ±‚æ—¶å‡ºé”™:\
          \ {str(e)}\\n\\n\"\n        result += f\"**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        return\
          \ {\"result\": result}\n    \n    except json.JSONDecodeError:\n       \
          \ # JSONè§£æé”™è¯¯\n        result = f\"### \U0001F4C4 æ•°æ®æ ¼å¼é”™è¯¯\\n\\n\"\n      \
          \  result += f\"APIè¿”å›çš„å“åº”ä¸æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼\\n\\n\"\n        result += f\"**å¯èƒ½åŸå› **:\
          \ APIæœåŠ¡è¿”å›äº†éæ ‡å‡†æ ¼å¼çš„æ•°æ®\\n\\n\"\n        result += f\"**è§£å†³æ–¹æ¡ˆ**: è¯·æ£€æŸ¥APIæœåŠ¡çš„é…ç½®å’ŒçŠ¶æ€\\\
          n\\n\"\n        result += f\"**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        return {\"result\"\
          : result}\n    \n    except Exception as e:\n        # å…¶ä»–æœªçŸ¥å¼‚å¸¸\n        result\
          \ = f\"### \U0001F525 æœªçŸ¥é”™è¯¯\\n\\n\"\n        result += f\"å‘ç”ŸæœªçŸ¥é”™è¯¯: {str(e)}\\\
          n\\n\"\n        result += f\"**ç”¨æˆ·æŸ¥è¯¢**: {input}\"\n        return {\"result\"\
          : result} "
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æŸ¥çœ‹å½“å‰å®¹å™¨çŠ¶æ€
        type: code
        variables:
        - value_selector:
          - '1751957208728'
          - input
          variable: input
        - value_selector:
          - env
          - API_KEY
          variable: API_KEY
      height: 54
      id: '1751957214274'
      position:
        x: 385.3094550000294
        y: 282
      positionAbsolute:
        x: 385.3094550000294
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1751957214274'
          - result
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 7c652337-d004-449a-84e6-c97f4e79dbed
          role: system
          text: 'ä½ æ˜¯ä¸€ä¸ªDockerå®¹å™¨åŒ¹é…ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯ä»è¿è¡Œä¸­çš„å®¹å™¨åˆ—è¡¨ä¸­æ‰¾åˆ°ç”¨æˆ·æƒ³è¦æ“ä½œçš„å®¹å™¨ã€‚


            ã€å®¹å™¨åˆ—è¡¨æ•°æ®ã€‘+ã€ç”¨æˆ·æŒ‡ä»¤ã€‘={{#context#}}

            è¯·åˆ†æç”¨æˆ·æŒ‡ä»¤ï¼Œæ‰¾å‡ºä»–ä»¬æƒ³è¦æ“ä½œçš„ç‰¹å®šå®¹å™¨ã€‚ç”¨æˆ·å¯èƒ½ä¼šé€šè¿‡å®¹å™¨åç§°ã€IDçš„ä¸€éƒ¨åˆ†ã€æˆ–è€…é•œåƒåç§°æ¥æè¿°å®¹å™¨ã€‚

            ä½ éœ€è¦è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼Œæ‰¾å‡ºæœ€ç¬¦åˆç”¨æˆ·æè¿°çš„å®¹å™¨ã€‚


            å¦‚æœæ‰¾åˆ°åŒ¹é…çš„å®¹å™¨ï¼Œè¯·ä»…è¾“å‡ºè¯¥å®¹å™¨çš„å®Œæ•´åç§°ï¼ˆNameså­—æ®µå€¼ï¼‰ã€‚

            å¦‚æœæ‰¾åˆ°å¤šä¸ªåŒ¹é…çš„å®¹å™¨ï¼Œè¯·é€‰æ‹©åŒ¹é…åº¦æœ€é«˜çš„ä¸€ä¸ªã€‚

            å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å®¹å™¨ï¼Œè¯·è¾“å‡ºnullã€‚


            æ³¨æ„ï¼š

            1. ä¸è¦è¾“å‡ºä»»ä½•è§£é‡Šæˆ–é™„åŠ ä¿¡æ¯ï¼Œåªè¾“å‡ºå®¹å™¨åç§°æˆ–null

            2. å¯¹äºå¤šä¸ªåŒ¹é…é¡¹ï¼Œä¼˜å…ˆé€‰æ‹©åç§°åŒ¹é…çš„ï¼Œå…¶æ¬¡æ˜¯é•œåƒåç§°åŒ¹é…çš„ï¼Œæœ€åæ˜¯IDåŒ¹é…çš„

            3. ç¡®ä¿è¾“å‡ºçš„æ˜¯å®Œæ•´ã€å‡†ç¡®çš„å®¹å™¨åç§°ï¼Œå¯ç›´æ¥ç”¨äºåœæ­¢å®¹å™¨æ“ä½œ'
        selected: false
        title: å®¹å™¨åŒ¹é…
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1751957253130'
      position:
        x: 687
        y: 282
      positionAbsolute:
        x: 687
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1751957292502'
          - result
          variable: text
        selected: false
        title: ç»“æŸ
        type: end
      height: 90
      id: '1751957280872'
      position:
        x: 1291
        y: 282
      positionAbsolute:
        x: 1291
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport requests\n\
          import json\n\ndef main(input: str, API_KEY: str) -> dict:\n    \"\"\"\n\
          \    æ ¹æ®ç”¨æˆ·è¾“å…¥åœæ­¢ç‰¹å®šçš„Dockerå®¹å™¨ï¼Œé€‚ç”¨äºDifyå¹³å°ã€‚\n    å·²ä¿®å¤è®¤è¯é—®é¢˜ï¼Œç¡®ä¿APIå¯†é’¥éšè¯·æ±‚å‘é€ã€‚\n    \n \
          \   å‚æ•°:\n        input: ç”¨æˆ·è¾“å…¥ï¼Œæ ¼å¼åº”ä¸ºJSONå­—ç¬¦ä¸²ï¼ŒåŒ…å«è¦åœæ­¢çš„å®¹å™¨IDæˆ–åç§°\n              ä¾‹å¦‚:\
          \ {\"container_id\": \"abc123\"} æˆ– {\"container_name\": \"mysql_container\"\
          }\n        API_KEY: ç”¨äºè®¤è¯çš„APIå¯†é’¥ï¼Œç”±Difyå¹³å°è‡ªåŠ¨ä¼ å…¥\n    \n    è¿”å›:\n        dict:\
          \ åŒ…å«æ“ä½œç»“æœçš„JSONå­—å…¸ï¼Œæ ¼å¼ä¸º {\"result\": \"...\"}\n    \"\"\"\n    # APIæœåŠ¡çš„URL\n\
          \    API_BASE_URL = \"http://172.17.0.1:8005\"\n    \n    try:\n       \
          \ # æ·»åŠ APIå¯†é’¥åˆ°è¯·æ±‚å¤´\n        headers = {\n            \"X-API-Key\": API_KEY,\n\
          \            \"Content-Type\": \"application/json\" # æ˜ç¡®æŒ‡å®šå†…å®¹ç±»å‹\n       \
          \ }\n        \n        # è§£æç”¨æˆ·è¾“å…¥ï¼Œè·å–å®¹å™¨IDæˆ–åç§°\n        container_info = None\n\
          \        try:\n            # å°è¯•è§£æJSONè¾“å…¥\n            user_input = json.loads(input)\n\
          \            container_info = user_input.get(\"container_id\") or user_input.get(\"\
          container_name\")\n        except json.JSONDecodeError:\n            # å¦‚æœä¸æ˜¯JSONæ ¼å¼ï¼Œç›´æ¥ä½¿ç”¨è¾“å…¥ä½œä¸ºå®¹å™¨ID/åç§°\n\
          \            container_info = input.strip()\n        \n        if not container_info:\n\
          \            return {\n                \"result\": json.dumps({\n      \
          \              \"status\": \"error\",\n                    \"error_type\"\
          : \"invalid_input\",\n                    \"message\": \"è¯·æä¾›æœ‰æ•ˆçš„å®¹å™¨IDæˆ–åç§°\"\
          ,\n                    \"user_query\": input\n                }, ensure_ascii=False)\n\
          \            }\n        \n        # å¦‚æœéœ€è¦ï¼Œå…ˆè·å–å®¹å™¨åˆ—è¡¨æ¥éªŒè¯å®¹å™¨å­˜åœ¨\n        # æ³¨æ„ï¼šè¿™é‡Œå·²ç»æ­£ç¡®ä½¿ç”¨äº†\
          \ headers\n        containers_response = requests.get(f\"{API_BASE_URL}/docker/ps\"\
          , headers=headers, timeout=10)\n        containers_response.raise_for_status()\n\
          \        containers_data = containers_response.json()\n        \n      \
          \  if containers_data.get(\"status\") != \"success\":\n            return\
          \ {\n                \"result\": json.dumps({\n                    \"status\"\
          : \"error\",\n                    \"message\": \"è·å–å®¹å™¨åˆ—è¡¨å¤±è´¥: \" + containers_data.get(\"\
          message\", \"æœªçŸ¥é”™è¯¯\"),\n                    \"user_query\": input\n     \
          \           }, ensure_ascii=False)\n            }\n        \n        # æŸ¥æ‰¾åŒ¹é…çš„å®¹å™¨\n\
          \        target_container = None\n        containers = containers_data.get(\"\
          containers\", [])\n        container_id_to_stop = None\n        \n     \
          \   for container in containers:\n            container_id = container.get(\"\
          ID\", \"\")\n            container_name = container.get(\"Names\", \"\"\
          )\n            \n            # åŒ¹é…å®¹å™¨IDæˆ–åç§°ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰\n            if (container_info.lower()\
          \ in container_id.lower() or \n                container_info.lower() in\
          \ container_name.lower()):\n                target_container = container\n\
          \                container_id_to_stop = container_id\n                break\n\
          \        \n        # å¦‚æœæ²¡æ‰¾åˆ°åŒ¹é…çš„å®¹å™¨\n        if not target_container:\n    \
          \        return {\n                \"result\": json.dumps({\n          \
          \          \"status\": \"error\",\n                    \"error_type\": \"\
          container_not_found\",\n                    \"message\": f\"æœªæ‰¾åˆ°åŒ¹é… '{container_info}'\
          \ çš„è¿è¡Œä¸­å®¹å™¨\",\n                    \"user_query\": input\n               \
          \ }, ensure_ascii=False)\n            }\n        \n        # å‘é€è¯·æ±‚åœæ­¢å®¹å™¨\n\
          \        # å…³é”®ä¿®æ”¹ï¼šåœ¨è¿™é‡Œæ·»åŠ  headers=headers å‚æ•°\n        stop_response = requests.post(\n\
          \            f\"{API_BASE_URL}/docker/stop\",\n            json={\"container_id\"\
          : container_id_to_stop},\n            headers=headers, # <-- ä¿®å¤ç‚¹ï¼šæ·»åŠ è®¤è¯å¤´\n\
          \            timeout=30\n        )\n        stop_response.raise_for_status()\n\
          \        stop_data = stop_response.json()\n        \n        # æ£€æŸ¥åœæ­¢æ“ä½œæ˜¯å¦æˆåŠŸ\n\
          \        if stop_data.get(\"status\") != \"success\":\n            return\
          \ {\n                \"result\": json.dumps({\n                    \"status\"\
          : \"error\",\n                    \"message\": f\"åœæ­¢å®¹å™¨å¤±è´¥: {stop_data.get('message',\
          \ 'æœªçŸ¥é”™è¯¯')}\",\n                    \"container\": {\n                  \
          \      \"id\": target_container.get(\"ID\", \"\"),\n                   \
          \     \"name\": target_container.get(\"Names\", \"\")\n                \
          \    },\n                    \"user_query\": input\n                }, ensure_ascii=False)\n\
          \            }\n        \n        # æ“ä½œæˆåŠŸ\n        return {\n           \
          \ \"result\": json.dumps({\n                \"status\": \"success\",\n \
          \               \"message\": f\"å®¹å™¨ '{target_container.get('Names', '')}'\
          \ ({target_container.get('ID', '')[:12]}) å·²æˆåŠŸåœæ­¢ã€‚\",\n                \"\
          container\": {\n                    \"id\": target_container.get(\"ID\"\
          , \"\"),\n                    \"name\": target_container.get(\"Names\",\
          \ \"\"),\n                    \"image\": target_container.get(\"Image\"\
          , \"\")\n                },\n                \"user_query\": input\n   \
          \         }, ensure_ascii=False)\n        }\n    \n    except requests.exceptions.ConnectionError:\n\
          \        # APIæœåŠ¡è¿æ¥é”™è¯¯\n        return {\n            \"result\": json.dumps({\n\
          \                \"status\": \"error\",\n                \"error_type\"\
          : \"connection_error\",\n                \"message\": f\"æ— æ³•è¿æ¥åˆ°Docker APIæœåŠ¡\
          \ {API_BASE_URL}ï¼Œè¯·ç¡®ä¿æœåŠ¡æ­£åœ¨è¿è¡Œã€‚\",\n                \"user_query\": input\n\
          \            }, ensure_ascii=False)\n        }\n    except requests.exceptions.Timeout:\n\
          \        # è¯·æ±‚è¶…æ—¶\n        return {\n            \"result\": json.dumps({\n\
          \                \"status\": \"error\",\n                \"error_type\"\
          : \"timeout\",\n                \"message\": f\"è¿æ¥Docker APIæœåŠ¡ {API_BASE_URL}\
          \ è¶…æ—¶ï¼Œè¯·æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚\",\n                \"user_query\": input\n          \
          \  }, ensure_ascii=False)\n        }\n    except requests.exceptions.HTTPError\
          \ as e:\n        # å…¶ä»–è¯·æ±‚é”™è¯¯ï¼Œç‰¹åˆ«æ˜¯401 Unauthorized\n        error_message = str(e)\n\
          \        if e.response is not None:\n            try:\n                #\
          \ å°è¯•è§£æJSONé”™è¯¯å“åº”\n                error_details = e.response.json()\n    \
          \            if \"message\" in error_details:\n                    error_message\
          \ = error_details[\"message\"]\n            except json.JSONDecodeError:\n\
          \                # å¦‚æœä¸æ˜¯JSONï¼Œåˆ™ä½¿ç”¨åŸå§‹æ–‡æœ¬\n                error_message = e.response.text\n\
          \n        return {\n            \"result\": json.dumps({\n             \
          \   \"status\": \"error\",\n                \"error_type\": \"request_error\"\
          ,\n                \"http_status_code\": e.response.status_code if e.response\
          \ else None,\n                \"message\": f\"å‘é€è¯·æ±‚æ—¶å‡ºé”™: {error_message}\"\
          ,\n                \"user_query\": input\n            }, ensure_ascii=False)\n\
          \        }\n    except Exception as e:\n        # å…¶ä»–æœªçŸ¥å¼‚å¸¸\n        return\
          \ {\n            \"result\": json.dumps({\n                \"status\": \"\
          error\",\n                \"error_type\": \"unknown_error\",\n         \
          \       \"message\": str(e),\n                \"user_query\": input\n  \
          \          }, ensure_ascii=False)\n        }\n\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: true
        title: åœæ­¢å¯¹åº”å®¹å™¨
        type: code
        variables:
        - value_selector:
          - '1751957253130'
          - text
          variable: input
        - value_selector:
          - env
          - API_KEY
          variable: API_KEY
      height: 54
      id: '1751957292502'
      position:
        x: 993.3094550000292
        y: 282
      positionAbsolute:
        x: 993.3094550000292
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -408.66532362135797
      y: 165.81630514919743
      zoom: 0.8660051830299772
