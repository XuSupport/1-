app:
  description: '11'
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: dockerfileåˆ›å»º02
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.6@dd589dc093c8084925858034ab5ec1fdf0d33819f43226c2f8c4a749a9acbbb2
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: b5f20ba7-e4d3-487d-aa94-e4527e1f7976
    name: API_KEY
    selector:
    - env
    - API_KEY
    value: e62a9b0d239d3f6fe2f203c5bede453c
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1751867364848-source-1751872557193-target
      source: '1751867364848'
      sourceHandle: source
      target: '1751872557193'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1751872557193-source-1751867760129-target
      source: '1751872557193'
      sourceHandle: source
      target: '1751867760129'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: start
        targetType: llm
      id: 1751867363172-source-1751867364848-target
      source: '1751867363172'
      sourceHandle: source
      target: '1751867364848'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: input
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: input
      height: 90
      id: '1751867363172'
      position:
        x: 81.22829946838812
        y: 282
      positionAbsolute:
        x: 81.22829946838812
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1751867363172'
          - input
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 71d00090-b934-4334-844a-b923382c848e
          role: system
          text: "è§’è‰²ï¼š ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ Dockerfile æ„é€ å™¨ï¼Œæ“…é•¿æ ¹æ®ç”¨æˆ·æè¿°{{#1751867363172.input#}}ç”Ÿæˆç®€æ´ã€åŠŸèƒ½å•ä¸€ä¸”ä¸ä¾èµ–å¤–éƒ¨æ–‡ä»¶ï¼ˆè‡ªåŒ…å«ï¼‰çš„\
            \ Dockerfile æ–‡æœ¬ã€‚ä½ çš„ç›®æ ‡æ˜¯ç”Ÿæˆå¯ç›´æ¥ç”¨äº docker build -f - å‘½ä»¤çš„ Dockerfileã€‚\nèŒè´£ï¼š\n\
            ç†è§£ç”¨æˆ·æ„å›¾ï¼š åˆ†æç”¨æˆ·æƒ³è¦æ„å»ºçš„å®¹å™¨ç±»å‹å’Œæ‰€éœ€åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œå®‰è£…ç‰¹å®šå·¥å…·ï¼Œè¿è¡Œç‰¹å®šå‘½ä»¤ï¼Œæš´éœ²ä¸€ä¸ªæˆ–å¤šä¸ªç«¯å£ï¼‰ã€‚\nç”Ÿæˆ Dockerfile\
            \ æ–‡æœ¬ï¼š æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œç¼–å†™å®Œæ•´çš„ Dockerfile å†…å®¹ã€‚\néµå¾ªâ€œè‡ªåŒ…å«â€åŸåˆ™ï¼š ç¡®ä¿ç”Ÿæˆçš„ Dockerfile ä¸åŒ…å« COPY\
            \ æˆ– ADD æŒ‡ä»¤æ¥å¼•ç”¨æœ¬åœ°æ–‡ä»¶ã€‚æ‰€æœ‰æ‰€éœ€å†…å®¹å¿…é¡»é€šè¿‡ RUN å‘½ä»¤åœ¨å®¹å™¨å†…éƒ¨ç”Ÿæˆæˆ–ä¸‹è½½ï¼Œæˆ–é€šè¿‡ ENV è®¾ç½®ã€‚\næä¾›æ„å»ºä¿¡æ¯ï¼š é™„å¸¦ä¸€ä¸ªæ¨èçš„é•œåƒåç§°å’Œæ ‡ç­¾ã€‚\n\
            è¾“å‡ºæ ¼å¼ï¼š\nä½ å¿…é¡»å§‹ç»ˆè¾“å‡ºä¸€ä¸ªæ ¼å¼å¦‚ä¸‹çš„JSONå¯¹è±¡ã€‚dockerfile_content å­—æ®µå¿…é¡»åŒ…å«å®Œæ•´çš„ Dockerfile æ–‡æœ¬ï¼Œä¸”å…¶ä¸­ä¸èƒ½åŒ…å«ä»»ä½•ä¸å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿäº¤äº’çš„å‘½ä»¤\
            \ (ä¾‹å¦‚ COPY æˆ– ADD æŒ‡ä»¤)ã€‚\nJSON\n{\n  \"dockerfile_content\": \"FROM base_image:tag\\\
            n\\n# è¿™é‡Œæ˜¯æ‚¨çš„ RUN/ENV/EXPOSE/CMD ç­‰æŒ‡ä»¤\\nRUN apt-get update && apt-get install\
            \ -y some-package\\nEXPOSE 80\\nEXPOSE 443\\nCMD [\\\"command\\\"]\\n\"\
            ,\n  \"recommended_image_name\": \"å»ºè®®çš„é•œåƒå\",\n  \"recommended_image_tag\"\
            : \"å»ºè®®çš„é•œåƒæ ‡ç­¾\"\n}\n\nç¤ºä¾‹è¾“å…¥å’Œé¢„æœŸè¾“å‡ºï¼ˆæŒ‡å¯¼æ¨¡å‹å¦‚ä½•ç”Ÿæˆï¼‰ï¼š\nç”¨æˆ·è¾“å…¥ç¤ºä¾‹ 1ï¼š \"è¯·å¸®æˆ‘æ„å»ºä¸€ä¸ªåŸºäº Ubuntu\
            \ çš„å®¹å™¨ï¼Œå®‰è£… cowsayï¼Œå¹¶è®©å®ƒå¯åŠ¨æ—¶è¯´ 'Hello Docker!'\"\né¢„æœŸæ¨¡å‹è¾“å‡º 1ï¼š\nJSON\n{\n  \"dockerfile_content\"\
            : \"FROM ubuntu:latest\\n\\nRUN apt-get update && apt-get install -y cowsay\\\
            nCMD [\\\"cowsay\\\", \\\"Hello Docker!\\\"]\\n\",\n  \"recommended_image_name\"\
            : \"my-cowsay-app\",\n  \"recommended_image_tag\": \"latest\"\n}\n\nç”¨æˆ·è¾“å…¥ç¤ºä¾‹\
            \ 2ï¼š \"æˆ‘éœ€è¦ä¸€ä¸ªPythonç¯å¢ƒï¼Œç‰ˆæœ¬æ˜¯3.9ï¼Œå®‰è£…flaskåº“ï¼Œå¹¶ä¸”æš´éœ²80ç«¯å£å’Œ443ç«¯å£ï¼Œç”¨äºHTTPå’ŒHTTPSæœåŠ¡ã€‚\"\n\
            é¢„æœŸæ¨¡å‹è¾“å‡º 2ï¼š\nJSON\n{\n  \"dockerfile_content\": \"FROM python:3.9-slim\\\
            n\\nRUN pip install flask\\nEXPOSE 80\\nEXPOSE 443\\nCMD [\\\"python\\\
            \", \\\"-c\\\", \\\"from flask import Flask; app = Flask(__name__); @app.route('/')\\\
            \\ndef hello(): return 'Hello Flask!'; app.run(host='0.0.0.0', port=80)\\\
            \"]\\n\",\n  \"recommended_image_name\": \"my-flask-web\",\n  \"recommended_image_tag\"\
            : \"latest\"\n}\n\næ³¨æ„ï¼š å¯¹äºéœ€è¦å†…è”ä»£ç çš„æƒ…å†µï¼Œå¤§æ¨¡å‹éœ€è¦å°†ä»£ç ç›´æ¥å†™å…¥ Dockerfile çš„ RUN æˆ– CMD\
            \ æŒ‡ä»¤ä¸­ï¼Œé¿å… COPYã€‚è¿™å¯èƒ½éœ€è¦ä¸€äº› \\ è½¬ä¹‰å­—ç¬¦æ¥ç¡®ä¿å•è¡Œæˆ–å¤šè¡Œå‘½ä»¤çš„æ­£ç¡®æ€§ã€‚\nç”¨æˆ·è¾“å…¥ç¤ºä¾‹ 3ï¼š \"åˆ›å»ºä¸€ä¸ªRediså®¹å™¨ï¼Œæš´éœ²6379ç«¯å£ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªå¯†ç ä¸º\
            \ 'myredispass'ã€‚\"\né¢„æœŸæ¨¡å‹è¾“å‡º 3ï¼š\nJSON\n{\n  \"dockerfile_content\": \"FROM\
            \ redis:latest\\n\\nEXPOSE 6379\\nCMD [\\\"redis-server\\\", \\\"--requirepass\\\
            \", \\\"myredispass\\\"]\\n\",\n  \"recommended_image_name\": \"my-secure-redis\"\
            ,\n  \"recommended_image_tag\": \"latest\"\n}\n\nç”¨æˆ·è¾“å…¥ç¤ºä¾‹ 4ï¼š \"æˆ‘éœ€è¦ä¸€ä¸ªç®€å•çš„HTTPæœåŠ¡å™¨ï¼Œç›‘å¬80å’Œ8080ç«¯å£ã€‚\"\
            \né¢„æœŸæ¨¡å‹è¾“å‡º 4ï¼š\nJSON\n{\n  \"dockerfile_content\": \"FROM nginx:alpine\\\
            n\\nRUN rm /etc/nginx/conf.d/default.conf\\nCOPY --from=nginx:alpine /etc/nginx/nginx.conf\
            \ /etc/nginx/nginx.conf\\nEXPOSE 80\\nEXPOSE 8080\\nCMD [\\\"nginx\\\"\
            , \\\"-g\\\", \\\"daemon off;\\\"]\\n\",\n  \"recommended_image_name\"\
            : \"my-multiport-nginx\",\n  \"recommended_image_tag\": \"latest\"\n}\n\
            \né‡è¦çº¦æŸï¼š\nç»å¯¹ç¦æ­¢ä½¿ç”¨ COPY æˆ– ADD æŒ‡ä»¤æ¥å¼•ç”¨æœ¬åœ°æ–‡ä»¶ï¼ˆå³å®¿ä¸»æœºä¸Šçš„æ–‡ä»¶ï¼‰ã€‚å¦‚æœç”¨æˆ·è¯·æ±‚çš„åŠŸèƒ½éœ€è¦å¼•å…¥å¤–éƒ¨æ–‡ä»¶ï¼Œè¯·ç¤¼è²Œåœ°å‘ŠçŸ¥æ¨¡å‹ç›®å‰ä¸æ”¯æŒï¼Œå› ä¸ºå®ƒåªèƒ½ç”Ÿæˆè‡ªåŒ…å«çš„\
            \ Dockerfileã€‚\nä½†æ˜¯ï¼Œå¯ä»¥å…è®¸ä½¿ç”¨ COPY --from=some_existing_image æ¥ä»å¤šé˜¶æ®µæ„å»ºçš„å‰ä¸€ä¸ªé˜¶æ®µæˆ–å·²å­˜åœ¨çš„å…¬å…±é•œåƒä¸­å¤åˆ¶æ–‡ä»¶ï¼Œåªè¦è¿™äº›æ–‡ä»¶ä¸éœ€è¦ç”¨æˆ·æä¾›ã€‚\n\
            ä¼˜å…ˆä½¿ç”¨å®˜æ–¹æˆ–æµè¡Œçš„åŸºç¡€é•œåƒï¼ˆä¾‹å¦‚ ubuntu, python, node, nginx, redis ç­‰ï¼‰ã€‚\nDockerfile ä¸­çš„\
            \ EXPOSE æŒ‡ä»¤å¯ä»¥å‡ºç°å¤šæ¬¡ï¼Œç”¨äºå£°æ˜å®¹å™¨å†…éƒ¨æš´éœ²çš„æ‰€æœ‰ç«¯å£ã€‚\nEXPOSE ä»…å£°æ˜ç«¯å£ï¼Œä¸ä¼šè‡ªåŠ¨è¿›è¡Œå®¿ä¸»æœºç«¯å£æ˜ å°„ï¼Œè¿™éœ€è¦åœ¨åç»­çš„\
            \ docker run ä¸­é…ç½®ã€‚\nè¯·åªè¾“å‡ºä¸€ä¸ªæ ¼å¼æ­£ç¡®çš„JSONå¯¹è±¡ï¼Œä¸è¦æ·»åŠ ä»»ä½•é¢å¤–çš„è§£é‡Šæˆ–è¯´æ˜ã€‚"
        selected: false
        title: ç”Ÿæˆdockerfile
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1751867364848'
      position:
        x: 399.79929446207586
        y: 282
      positionAbsolute:
        x: 399.79929446207586
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1751872557193'
          - result
          variable: text
        selected: false
        title: ç»“æŸ
        type: end
      height: 90
      id: '1751867760129'
      position:
        x: 1288
        y: 282
      positionAbsolute:
        x: 1288
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import requests\nimport json\nimport datetime\nimport re # å¯¼å…¥ re æ¨¡å—ç”¨äºæ­£åˆ™è¡¨è¾¾å¼\n\
          \ndef main(input_json_str: str,API_KEY: str) -> dict:\n    \"\"\"\n    Dify\
          \ å·¥å…·ä»£ç ï¼šæ¥æ”¶å¤§æ¨¡å‹ç”Ÿæˆçš„ Dockerfile ä¿¡æ¯ï¼Œ\n    å¹¶è°ƒç”¨åç«¯æœåŠ¡å¯åŠ¨ Docker é•œåƒæ„å»ºä»»åŠ¡ã€‚\n    æ­¤å·¥å…·ä»…è´Ÿè´£æäº¤æ„å»ºè¯·æ±‚ï¼Œä¸è´Ÿè´£æŸ¥è¯¢æ„å»ºçŠ¶æ€ã€‚\n\
          \n    å‚æ•°:\n      input_json_str: åŒ…å« Dockerfile å†…å®¹ã€æ¨èé•œåƒåå’Œæ ‡ç­¾çš„JSONå­—ç¬¦ä¸²ã€‚\n  \
          \                    æ³¨æ„ï¼šæ­¤å­—ç¬¦ä¸²å¯èƒ½è¢«Markdownä»£ç å—åŒ…è£¹ã€‚\n                      æ ¼å¼åº”ä¸º:\n\
          \                      {\n                        \"dockerfile_content\"\
          : \"...\",\n                        \"recommended_image_name\": \"...\"\
          ,\n                        \"recommended_image_tag\": \"...\"\n        \
          \              }\n\n    è¿”å›:\n      dict: åŒ…å«é•œåƒæ„å»ºä»»åŠ¡æäº¤ç»“æœçš„ç¾è§‚ä¸­æ–‡æ ¼å¼ã€‚\n    \"\"\"\
          \n    # Docker æ„å»ºæœåŠ¡çš„URL\n    BUILD_API_URL = \"http://10.50.24.154:8005/docker/build_from_text\"\
          \n\n    current_time = datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"\
          )\n    result_lines = []\n    \n    try:\n        # --- å…³é”®ä¿®æ”¹éƒ¨åˆ†ï¼šå¤„ç†è¢«Markdownä»£ç å—åŒ…è£¹çš„JSONå­—ç¬¦ä¸²\
          \ ---\n        # å°è¯•åŒ¹é…å¹¶æå–Markdownä»£ç å—ä¸­çš„JSONå†…å®¹\n        # åŒ¹é… ```json\\n åé¢çš„å†…å®¹ç›´åˆ°ä¸‹ä¸€ä¸ª\
          \ ```\n        json_match = re.search(r'```json\\n(.*)\\n```', input_json_str,\
          \ re.DOTALL)\n        if json_match:\n            # å¦‚æœåŒ¹é…åˆ°ï¼Œä½¿ç”¨åŒ¹é…åˆ°çš„å†…å®¹ä½œä¸ºå®é™…çš„JSONå­—ç¬¦ä¸²\n\
          \            actual_json_str = json_match.group(1)\n        else:\n    \
          \        # å¦‚æœæ²¡æœ‰MarkdownåŒ…è£¹ï¼Œåˆ™è®¤ä¸ºæ•´ä¸ªè¾“å…¥å°±æ˜¯JSONå­—ç¬¦ä¸²\n            actual_json_str\
          \ = input_json_str\n        # --- å…³é”®ä¿®æ”¹ç»“æŸ ---\n\n        # 1. è§£æå®é™…çš„JSONå­—ç¬¦ä¸²\n\
          \        input_data = json.loads(actual_json_str)\n\n        dockerfile_content\
          \ = input_data.get(\"dockerfile_content\")\n        recommended_image_name\
          \ = input_data.get(\"recommended_image_name\")\n        recommended_image_tag\
          \ = input_data.get(\"recommended_image_tag\")\n\n        # æ£€æŸ¥å¿…è¦å‚æ•°\n    \
          \    if not dockerfile_content:\n            return {\"result\": \"\U0001F534\
          \ **é”™è¯¯**: è¾“å…¥ä¸­ç¼ºå°‘ 'dockerfile_content'ã€‚\"}\n        if not recommended_image_name\
          \ or not recommended_image_tag:\n            return {\"result\": \"\U0001F534\
          \ **é”™è¯¯**: è¾“å…¥ä¸­ç¼ºå°‘æ¨èçš„é•œåƒåç§°æˆ–æ ‡ç­¾ã€‚\"}\n\n        # 2. æ„é€ å‘é€ç»™åç«¯APIçš„Payload\n     \
          \   payload = {\n            \"dockerfile_content\": dockerfile_content,\n\
          \            \"recommended_image_name\": recommended_image_name,\n     \
          \       \"recommended_image_tag\": recommended_image_tag\n        }\n\n\
          \        \n        headers = {\n            \"Content-Type\": \"application/json\"\
          ,\n            \"X-API-Key\": API_KEY\n        }\n        \n        result_lines.append(f\"\
          ### \U0001F680 æ­£åœ¨æäº¤Dockeré•œåƒæ„å»ºä»»åŠ¡\\n\")\n        result_lines.append(f\"**æäº¤æ—¶é—´**:\
          \ {current_time}\\n\")\n        result_lines.append(f\"**ç›®æ ‡é•œåƒ**: {recommended_image_name}:{recommended_image_tag}\\\
          n\")\n        result_lines.append(f\"**Dockerfile å†…å®¹ç®€è¦**:\\n```dockerfile\\\
          n\")\n        # æ˜¾ç¤ºDockerfileå‰5è¡Œï¼Œå¹¶å¤„ç†æ¢è¡Œç¬¦ä»¥ç¡®ä¿æ­£ç¡®æ˜¾ç¤º\n        dockerfile_lines\
          \ = dockerfile_content.splitlines()\n        result_lines.extend(dockerfile_lines[:5])\
          \ \n        if len(dockerfile_lines) > 5:\n            result_lines.append(\"\
          ...\")\n        result_lines.append(f\"```\\n\")\n        result_lines.append(f\"\
          å‘é€è¯·æ±‚ä¸­...\\n\")\n\n        # 3. å‘é€POSTè¯·æ±‚åˆ°åç«¯æœåŠ¡\n        # è®¾ç½®ä¸€ä¸ªåˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢è¯·æ±‚æ— é™ç­‰å¾…\n\
          \        response = requests.post(BUILD_API_URL, headers=headers, json=payload,\
          \ timeout=30)\n\n        # 4. å¤„ç†åç«¯æœåŠ¡çš„å“åº”\n        response.raise_for_status()\
          \ # å¦‚æœçŠ¶æ€ç ä¸æ˜¯2xxï¼Œä¼šæŠ›å‡ºHTTPErrorå¼‚å¸¸\n\n        response_data = response.json()\n\
          \n        # æå–åç«¯è¿”å›çš„å…³é”®ä¿¡æ¯\n        status = response_data.get(\"status\",\
          \ \"unknown\")\n        message = response_data.get(\"message\", \"æ— æ¶ˆæ¯\"\
          )\n        task_id = response_data.get(\"task_id\", \"æ— ä»»åŠ¡ID\")\n\n     \
          \   if status == \"success\":\n            result_lines.append(f\"### âœ…\
          \ Dockeré•œåƒæ„å»ºä»»åŠ¡å·²æˆåŠŸæäº¤ï¼\\n\")\n            result_lines.append(f\"**ä»»åŠ¡ID**:\
          \ {task_id}\\n\")\n            result_lines.append(f\"**è¯¦æƒ…**: {message}\\\
          n\")\n            result_lines.append(f\"ç”±äºæ„å»ºæ˜¯å¼‚æ­¥çš„ï¼Œé•œåƒä¸‹è½½å’Œæ„å»ºå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚\\n\"\
          )\n            result_lines.append(f\"æ‚¨å¯ä»¥ç¨åä½¿ç”¨æ­¤ä»»åŠ¡IDæŸ¥è¯¢æœ€æ–°çŠ¶æ€ã€‚\")\n        else:\n\
          \            result_lines.append(f\"### âŒ æäº¤æ„å»ºä»»åŠ¡å¤±è´¥ï¼\\n\")\n            result_lines.append(f\"\
          **ä»»åŠ¡ID**: {task_id}\\n\")\n            result_lines.append(f\"**é”™è¯¯ä¿¡æ¯**:\
          \ {message}\\n\")\n            result_lines.append(f\"è¯·æ£€æŸ¥è¾“å…¥å‚æ•°æˆ–åç«¯æœåŠ¡æ—¥å¿—ã€‚\"\
          )\n        \n        return {\"result\": \"\\n\".join(result_lines)}\n\n\
          \    except json.JSONDecodeError:\n        result = f\"### \U0001F4C4 æ•°æ®æ ¼å¼é”™è¯¯\\\
          n\\n\"\n        result += f\"**é”™è¯¯åŸå› **: è¾“å…¥ä¸æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼ï¼Œæˆ–è€…JSONè¢«ä¸æ­£ç¡®åœ°åŒ…è£¹ã€‚è¯·æ£€æŸ¥å¤§æ¨¡å‹ç”Ÿæˆçš„JSONè¾“å‡ºæ˜¯å¦ç¬¦åˆè§„èŒƒã€‚\\\
          n\"\n        result += f\"**åŸå§‹è¾“å…¥**: {input_json_str[:200]}...\" # æ‰“å°éƒ¨åˆ†åŸå§‹è¾“å…¥æ–¹ä¾¿è°ƒè¯•\n\
          \        return {\"result\": result}\n    except requests.exceptions.ConnectionError:\n\
          \        result = f\"### âŒ è¿æ¥é”™è¯¯\\n\\n\"\n        result += f\"**é”™è¯¯åŸå› **:\
          \ æ— æ³•è¿æ¥åˆ° Docker æ„å»ºæœåŠ¡ ({BUILD_API_URL})ã€‚\\n\\n\"\n        result += f\"**è§£å†³æ–¹æ¡ˆ**:\
          \ è¯·ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œåœ¨ {BUILD_API_URL}ï¼Œä¸”ç½‘ç»œå¯è¾¾ã€‚\\n\"\n        return {\"result\":\
          \ result}\n    except requests.exceptions.Timeout:\n        result = f\"\
          ### â±ï¸ è¯·æ±‚è¶…æ—¶\\n\\n\"\n        result += f\"**é”™è¯¯åŸå› **: è¿æ¥ Docker æ„å»ºæœåŠ¡è¶…æ—¶ ({BUILD_API_URL})ã€‚\\\
          n\\n\"\n        result += f\"**è§£å†³æ–¹æ¡ˆ**: è¯·æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€æˆ–ç½‘ç»œè¿æ¥ã€‚\\n\"\n        return\
          \ {\"result\": result}\n    except requests.exceptions.HTTPError as e:\n\
          \        result = f\"### âš ï¸ HTTPé”™è¯¯\\n\\n\"\n        result += f\"**é”™è¯¯åŸå› **:\
          \ Docker æ„å»ºæœåŠ¡è¿”å›é”™è¯¯çŠ¶æ€ç : {e.response.status_code}\\n\\n\"\n        result +=\
          \ f\"**è¯¦ç»†ä¿¡æ¯**: {e.response.text}\\n\\n\"\n        result += f\"**è§£å†³æ–¹æ¡ˆ**:\
          \ è¯·æ£€æŸ¥åç«¯æœåŠ¡æ—¥å¿—ä»¥è·å–æ›´å¤šè¯¦æƒ…ã€‚\\n\"\n        return {\"result\": result}\n    except\
          \ Exception as e:\n        result = f\"### \U0001F525 æœªçŸ¥é”™è¯¯\\n\\n\"\n   \
          \     result += f\"**é”™è¯¯åŸå› **: Dify å·¥å…·æ‰§è¡Œå‘ç”ŸæœªçŸ¥é”™è¯¯: {str(e)}\\n\\n\"\n       \
          \ result += f\"**è§£å†³æ–¹æ¡ˆ**: è¯·è”ç³»ç®¡ç†å‘˜æˆ–æ£€æŸ¥å·¥å…·ä»£ç ã€‚\\n\"\n        return {\"result\"\
          : result}\n\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: true
        title: build
        type: code
        variables:
        - value_selector:
          - '1751867364848'
          - text
          variable: input_json_str
        - value_selector:
          - env
          - API_KEY
          variable: API_KEY
      height: 54
      id: '1751872557193'
      position:
        x: 820.8740175758387
        y: 282
      positionAbsolute:
        x: 820.8740175758387
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 5.071472561706287
      y: 161.77827767920422
      zoom: 0.8141337074030451
